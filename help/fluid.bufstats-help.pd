#N struct bufstatsitemstobesorted float x float index;
#N canvas 56 23 734 649 10;
#X obj 12 19 cnv 15 100 10 empty empty fluid.bufstats 20 12 0 36 #fcfcfc
#404040 0;
#X text 36 57 Computing Statistics on Buffers as Series., f 66;
#X text 37 116 Statistical analysis on buffer channels., f 62;
#N canvas 110 274 748 613 generators 0;
#X obj 57 174 until;
#X msg 125 195 -1;
#X msg 57 195 1;
#X obj 57 216 +;
#X obj 57 237 t f f f;
#X obj 58 571 tabwrite bufstats_source, f 108;
#X msg 89 121 \; bufstats_source const;
#X obj 39 101 t b b b b;
#X msg 57 155 101;
#X obj 265 36 inlet;
#X obj 265 54 t b b b;
#X msg 487 237 0;
#X msg 89 274 1;
#X obj 57 293 spigot;
#X obj 57 314 / 100;
#X obj 313 36 inlet;
#X obj 313 54 t b b b;
#X msg 137 301 1;
#X obj 105 320 spigot;
#X obj 361 36 inlet;
#X obj 361 54 t b b b;
#X msg 185 367 1;
#X obj 153 386 spigot;
#X obj 409 36 inlet;
#X obj 409 54 t b b b;
#X msg 233 435 1;
#X obj 201 454 spigot;
#X obj 457 36 inlet;
#X obj 457 54 t b b b;
#X msg 281 505 1;
#X obj 249 523 spigot;
#X obj 105 341 expr 1 - ($f1 / 100.);
#X obj 153 407 expr sin($f1 * 0.03141592653589793);
#X obj 201 473 expr max(0 \, sin($f1*0.03141592653589793*2.));
#X obj 39 122 outlet;
#X obj 249 544 expr random(0 \, 100001) * 1e-05;
#X connect 0 0 2 0;
#X connect 1 0 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 13 0;
#X connect 4 0 30 0;
#X connect 4 0 26 0;
#X connect 4 0 22 0;
#X connect 4 0 18 0;
#X connect 4 1 5 1;
#X connect 4 2 3 1;
#X connect 7 0 34 0;
#X connect 7 1 8 0;
#X connect 7 2 1 0;
#X connect 7 3 6 0;
#X connect 8 0 0 0;
#X connect 9 0 10 0;
#X connect 10 0 7 0;
#X connect 10 1 12 0;
#X connect 10 2 11 0;
#X connect 11 0 30 1;
#X connect 11 0 26 1;
#X connect 11 0 22 1;
#X connect 11 0 18 1;
#X connect 11 0 13 1;
#X connect 12 0 13 1;
#X connect 13 0 14 0;
#X connect 14 0 5 0;
#X connect 15 0 16 0;
#X connect 16 0 7 0;
#X connect 16 1 17 0;
#X connect 16 2 11 0;
#X connect 17 0 18 1;
#X connect 18 0 31 0;
#X connect 19 0 20 0;
#X connect 20 0 7 0;
#X connect 20 1 21 0;
#X connect 20 2 11 0;
#X connect 21 0 22 1;
#X connect 22 0 32 0;
#X connect 23 0 24 0;
#X connect 24 0 7 0;
#X connect 24 1 25 0;
#X connect 24 2 11 0;
#X connect 25 0 26 1;
#X connect 26 0 33 0;
#X connect 27 0 28 0;
#X connect 28 0 7 0;
#X connect 28 1 29 0;
#X connect 28 2 11 0;
#X connect 29 0 30 1;
#X connect 30 0 35 0;
#X connect 31 0 5 0;
#X connect 32 0 5 0;
#X connect 33 0 5 0;
#X connect 35 0 5 0;
#X restore 39 279 pd generators;
#N canvas 0 22 450 278 (subpatch) 0;
#X array bufstats_source 101 float 2;
#X coords 0 1 101 0 202 140 1 0 0;
#X restore 512 236 graph;
#X msg 57 200 ramp_down;
#X msg 39 181 ramp_up;
#X msg 76 219 half_sine;
#X msg 95 240 part_sine;
#X msg 114 260 random;
#X obj 39 318 array get bufstats_stats;
#X obj 39 339 unpack f f f f f f f f f f f f f f;
#X obj 39 300 fluid.bufstats -source bufstats_source -stats bufstats_stats
-numderivs 1, f 74;
#X text 350 365 mean;
#X text 349 382 stddev;
#X text 349 399 skewness;
#X text 349 416 kurtosis;
#X text 349 435 low;
#X text 350 451 mid;
#X text 349 467 high;
#X floatatom 287 365 10 0 0 0 - - - 0;
#X floatatom 287 382 10 0 0 0 - - - 0;
#X floatatom 287 399 10 0 0 0 - - - 0;
#X floatatom 287 416 10 0 0 0 - - - 0;
#X floatatom 287 433 10 0 0 0 - - - 0;
#X floatatom 287 450 10 0 0 0 - - - 0;
#X floatatom 287 467 10 0 0 0 - - - 0;
#X floatatom 287 517 10 0 0 0 - - - 0;
#X floatatom 287 534 10 0 0 0 - - - 0;
#X floatatom 287 551 10 0 0 0 - - - 0;
#X floatatom 287 568 10 0 0 0 - - - 0;
#X floatatom 287 585 10 0 0 0 - - - 0;
#X floatatom 287 602 10 0 0 0 - - - 0;
#X floatatom 287 619 10 0 0 0 - - - 0;
#X text 350 517 mean;
#X text 349 534 stddev;
#X text 349 551 skewness;
#X text 349 568 kurtosis;
#X text 349 587 low;
#X text 350 603 mid;
#X text 349 619 high;
#X text 284 347 stats on the data;
#X text 285 501 stats on the first derivative;
#X text 36 165 1) choose a source \, visualise it below \, and try
to imagine what would the values should be, f 91;
#N canvas 774 23 701 805 multichannel 0;
#X obj 50 61 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 44 270 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X text 46 11 "multichannel" arrays will process each channel in turn
\, and output 'channels' will be consecutive \, i.e. all features of
"channel" 1 \, then all features of "channel" 2 \, etc, f 87;
#X obj 27 360 unpack f f f f f f f f f f f f f f;
#X text 299 458 mean;
#X text 298 475 stddev;
#X text 298 492 skewness;
#X text 298 509 kurtosis;
#X text 298 528 low;
#X text 299 544 mid;
#X text 298 560 high;
#X floatatom 236 458 10 0 0 0 - - - 0;
#X floatatom 236 475 10 0 0 0 - - - 0;
#X floatatom 236 492 10 0 0 0 - - - 0;
#X floatatom 236 509 10 0 0 0 - - - 0;
#X floatatom 236 526 10 0 0 0 - - - 0;
#X floatatom 236 543 10 0 0 0 - - - 0;
#X floatatom 236 560 10 0 0 0 - - - 0;
#X floatatom 236 610 10 0 0 0 - - - 0;
#X floatatom 236 627 10 0 0 0 - - - 0;
#X floatatom 236 644 10 0 0 0 - - - 0;
#X floatatom 236 661 10 0 0 0 - - - 0;
#X floatatom 236 678 10 0 0 0 - - - 0;
#X floatatom 236 695 10 0 0 0 - - - 0;
#X floatatom 236 712 10 0 0 0 - - - 0;
#X text 299 610 mean;
#X text 298 627 stddev;
#X text 298 644 skewness;
#X text 298 661 kurtosis;
#X text 298 680 low;
#X text 299 696 mid;
#X text 298 712 high;
#X text 234 594 stats on the first derivative;
#X obj 288 350 unpack f f f f f f f f f f f f f f;
#X text 561 455 mean;
#X text 560 472 stddev;
#X text 560 489 skewness;
#X text 560 506 kurtosis;
#X text 560 525 low;
#X text 561 541 mid;
#X text 560 557 high;
#X floatatom 498 455 10 0 0 0 - - - 0;
#X floatatom 498 472 10 0 0 0 - - - 0;
#X floatatom 498 489 10 0 0 0 - - - 0;
#X floatatom 498 506 10 0 0 0 - - - 0;
#X floatatom 498 523 10 0 0 0 - - - 0;
#X floatatom 498 540 10 0 0 0 - - - 0;
#X floatatom 498 557 10 0 0 0 - - - 0;
#X floatatom 498 607 10 0 0 0 - - - 0;
#X floatatom 498 624 10 0 0 0 - - - 0;
#X floatatom 498 641 10 0 0 0 - - - 0;
#X floatatom 498 658 10 0 0 0 - - - 0;
#X floatatom 498 675 10 0 0 0 - - - 0;
#X floatatom 498 692 10 0 0 0 - - - 0;
#X floatatom 498 709 10 0 0 0 - - - 0;
#X text 561 607 mean;
#X text 560 624 stddev;
#X text 560 641 skewness;
#X text 560 658 kurtosis;
#X text 560 677 low;
#X text 561 693 mid;
#X text 560 709 high;
#X text 496 591 stats on the first derivative;
#X obj 48 761 clone fluid.multiarray 2 bufstats_feats;
#X obj 27 338 array get bufstats_feats-0;
#X obj 288 329 array get bufstats_feats-1;
#X text 233 440 stats on the first 'channel';
#X text 495 437 stats on the second channel;
#N canvas 741 516 859 503 composer 0;
#X obj 37 37 inlet;
#X obj 57 193 until;
#X msg 125 214 -1;
#X msg 57 214 1;
#X obj 57 235 +;
#X obj 57 256 t f f f;
#X obj 39 101 t b b b b;
#X msg 57 174 101;
#X obj 39 122 outlet;
#X msg 89 121 \; bufstats_src-0 const \; bufstats_src-1 const;
#X obj 48 405 tabwrite bufstats_src-0;
#X obj 197 406 tabwrite bufstats_src-1;
#X obj 57 314 / 100;
#X obj 195 314 expr random(0 \, 100001) * 1e-05;
#X connect 0 0 6 0;
#X connect 1 0 3 0;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 12 0;
#X connect 5 0 13 0;
#X connect 5 1 10 1;
#X connect 5 1 11 1;
#X connect 5 2 4 1;
#X connect 6 0 8 0;
#X connect 6 1 7 0;
#X connect 6 2 2 0;
#X connect 6 3 9 0;
#X connect 7 0 1 0;
#X connect 12 0 10 0;
#X connect 13 0 11 0;
#X restore 50 89 pd composer;
#X text 69 61 1) compose an artificially wide "stereo" array - a line
on the left channel \, and noise on the right channel, f 76;
#N canvas 0 22 450 278 (subpatch) 0;
#X array bufstats_src-0 101 float 2;
#X coords 0 1 101 0 202 140 1 0 0;
#X restore 198 131 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array bufstats_src-1 101 float 2;
#X coords 0 1 101 0 202 140 1 0 0;
#X restore 400 131 graph;
#X obj 44 287 fluid.bufstats -source bufstats_src -stats bufstats_feats
-numderivs 1, f 88;
#X text 63 269 2) process;
#X obj 44 308 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X connect 0 0 68 0;
#X connect 1 0 72 0;
#X connect 3 0 11 0;
#X connect 3 1 12 0;
#X connect 3 2 13 0;
#X connect 3 3 14 0;
#X connect 3 4 15 0;
#X connect 3 5 16 0;
#X connect 3 6 17 0;
#X connect 3 7 18 0;
#X connect 3 8 19 0;
#X connect 3 9 20 0;
#X connect 3 10 21 0;
#X connect 3 11 22 0;
#X connect 3 12 23 0;
#X connect 3 13 24 0;
#X connect 33 0 41 0;
#X connect 33 1 42 0;
#X connect 33 2 43 0;
#X connect 33 3 44 0;
#X connect 33 4 45 0;
#X connect 33 5 46 0;
#X connect 33 6 47 0;
#X connect 33 7 48 0;
#X connect 33 8 49 0;
#X connect 33 9 50 0;
#X connect 33 10 51 0;
#X connect 33 11 52 0;
#X connect 33 12 53 0;
#X connect 33 13 54 0;
#X connect 64 0 3 0;
#X connect 65 0 33 0;
#X connect 68 0 1 0;
#X connect 72 0 74 0;
#X connect 74 0 64 0;
#X connect 74 0 65 0;
#X restore 611 506 pd multichannel;
#N canvas 791 26 757 646 musical_example 0;
#X obj 16 57 soundfiler;
#X obj 16 75 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 448 532 array define bufstats_synth;
#X obj 449 553 array define bufstats_synth_slices;
#X obj 449 572 clone fluid.multiarray 2 bufstats_synth_slices_pitches
;
#X obj 18 110 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 18 128 fluid.bufonsetslice -minslicelength 10 -metric 9 -threshold
0.4 -filtersize 7 -source bufstats_synth -indices bufstats_synth_slices
, f 78;
#X obj 18 198 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X msg 16 28 read -resize media/Tremblay-AaS-SynthTwoVoices-M.wav bufstats_synth
;
#X floatatom 20 231 5 0 1 0 - - - 0;
#X obj 20 266 fluid.bufcompose -source bufstats_synth_slices_pitches
-destination bufstats_synth_slices_selected -numchans 1;
#X msg 20 248 startchan \$1 \, bang;
#X obj 449 591 array define bufstats_synth_slices_selected;
#X obj 448 610 array define bufstats_synth_slices_stats;
#N canvas 692 137 563 541 iterate_and_rank_slices 0;
#X obj 24 28 inlet;
#X obj 24 49 t b f;
#X obj 24 70 array size bufstats_synth_slices;
#X obj 24 91 - 1;
#X obj 108 202 +, f 6;
#X obj 108 165 until;
#X msg 108 184 1;
#X obj 108 223 t b f f f;
#X msg 155 185 -1;
#X obj 142 255 expr int(bufstats_synth_slices[$f1] / 512);
#X obj 141 315 expr max(2 \, (int(bufstats_synth_slices[$f1 + 1] /
512)) - $f2), f 64;
#X msg 141 285 startframe \$1;
#X msg 141 336 numframes \$1;
#X obj 109 361 fluid.bufstats -source bufstats_synth_slices_selected
-stats bufstats_synth_slices_stats -numderivs 1;
#X obj 109 415 int;
#X obj 109 433 tabread bufstats_synth_slices_stats;
#N canvas 313 48 1061 835 sorting_indices_per_values 0;
#X obj 532 180 inlet;
#X obj 622 491 pointer;
#X msg 624 370 -1;
#X msg 559 389 1;
#X obj 559 410 +;
#X obj 558 431 t f f f;
#X obj 58 573 pointer;
#X msg 58 451 next;
#X obj 56 371 int;
#X obj 58 431 until;
#X obj 103 738 list store;
#X obj 255 711 t l l;
#X obj 255 690 list prepend;
#X obj 799 189 inlet;
#X obj 532 209 t f b;
#X obj 56 392 + 1;
#X obj 799 242 t b b b;
#X obj 192 181 inlet;
#X obj 195 204 t b b b b b;
#X obj 103 759 outlet;
#X obj 338 97 struct bufstatsitemstobesorted float x float index;
#N canvas 0 23 450 300 bufstatstobesorted 0;
#X scalar bufstatsitemstobesorted 0.00399735 1 \;;
#X scalar bufstatsitemstobesorted 0.0141614 8 \;;
#X scalar bufstatsitemstobesorted 0.026675 25 \;;
#X scalar bufstatsitemstobesorted 0.031072 22 \;;
#X scalar bufstatsitemstobesorted 0.0320088 23 \;;
#X scalar bufstatsitemstobesorted 0.0355366 27 \;;
#X scalar bufstatsitemstobesorted 0.0357191 26 \;;
#X scalar bufstatsitemstobesorted 0.0358917 9 \;;
#X scalar bufstatsitemstobesorted 0.0390663 2 \;;
#X scalar bufstatsitemstobesorted 0.0503494 6 \;;
#X scalar bufstatsitemstobesorted 0.0578436 10 \;;
#X scalar bufstatsitemstobesorted 0.063755 20 \;;
#X scalar bufstatsitemstobesorted 0.0667298 17 \;;
#X scalar bufstatsitemstobesorted 0.0681961 14 \;;
#X scalar bufstatsitemstobesorted 0.0688973 19 \;;
#X scalar bufstatsitemstobesorted 0.0717841 5 \;;
#X scalar bufstatsitemstobesorted 0.0807952 24 \;;
#X scalar bufstatsitemstobesorted 0.0921044 11 \;;
#X scalar bufstatsitemstobesorted 0.098577 7 \;;
#X scalar bufstatsitemstobesorted 0.100636 3 \;;
#X scalar bufstatsitemstobesorted 0.10725 4 \;;
#X scalar bufstatsitemstobesorted 0.110378 18 \;;
#X scalar bufstatsitemstobesorted 0.112057 15 \;;
#X scalar bufstatsitemstobesorted 0.127506 13 \;;
#X scalar bufstatsitemstobesorted 0.127808 12 \;;
#X scalar bufstatsitemstobesorted 0.13166 16 \;;
#X scalar bufstatsitemstobesorted 0.146886 0 \;;
#X scalar bufstatsitemstobesorted 0.161208 21 \;;
#X restore 692 100 pd bufstatstobesorted;
#X msg 830 319 \; pd-bufstatstobesorted clear;
#X msg 622 469 traverse pd-bufstatstobesorted \, bang;
#X msg 104 490 traverse pd-bufstatstobesorted;
#X msg 359 348 \; pd-bufstatstobesorted sort;
#X obj 494 544 append bufstatsitemstobesorted x index;
#X obj 58 593 get bufstatsitemstobesorted index;
#X connect 0 0 14 0;
#X connect 1 0 26 2;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 8 1;
#X connect 5 1 26 1;
#X connect 5 2 4 1;
#X connect 6 0 27 0;
#X connect 7 0 6 0;
#X connect 8 0 15 0;
#X connect 9 0 7 0;
#X connect 10 0 19 0;
#X connect 11 0 10 1;
#X connect 11 1 12 1;
#X connect 12 0 11 0;
#X connect 13 0 16 0;
#X connect 14 0 26 0;
#X connect 14 1 3 0;
#X connect 15 0 9 0;
#X connect 16 0 2 0;
#X connect 16 1 23 0;
#X connect 16 2 22 0;
#X connect 17 0 18 0;
#X connect 18 0 10 0;
#X connect 18 1 8 0;
#X connect 18 2 12 1;
#X connect 18 3 24 0;
#X connect 18 4 25 0;
#X connect 23 0 1 0;
#X connect 24 0 6 0;
#X connect 27 0 12 0;
#X restore 23 469 pd sorting_indices_per_values;
#X obj 24 112 t b f b b, f 29;
#X obj 23 490 outlet;
#X obj 109 393 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 14 1;
#X connect 2 0 3 0;
#X connect 3 0 17 0;
#X connect 4 0 7 0;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 7 0 13 0;
#X connect 7 1 10 0;
#X connect 7 2 9 0;
#X connect 7 3 4 1;
#X connect 8 0 4 1;
#X connect 9 0 10 1;
#X connect 9 0 11 0;
#X connect 10 0 12 0;
#X connect 11 0 13 0;
#X connect 12 0 13 0;
#X connect 13 0 19 0;
#X connect 14 0 15 0;
#X connect 15 0 16 1;
#X connect 16 0 18 0;
#X connect 17 0 16 0;
#X connect 17 1 5 0;
#X connect 17 2 8 0;
#X connect 17 3 16 2;
#X connect 19 0 14 0;
#X restore 189 373 pd iterate_and_rank_slices;
#X obj 24 452 list store, f 28;
#X floatatom 24 417 5 0 0 0 - - - 0;
#X msg 24 434 get \$1 1;
#X obj 24 487 t f f;
#X obj 24 627 dac~;
#X obj 50 566 -;
#X obj 24 587 pack;
#X floatatom 24 470 5 0 0 0 - - - 0;
#X obj 24 564 f;
#X obj 24 543 t f f;
#X obj 24 506 + 1;
#X obj 24 524 tabread bufstats_synth_slices;
#X obj 207 524 tabread bufstats_synth_slices;
#X obj 24 606 tabplay~ bufstats_synth;
#X msg 434 332 0;
#X text 57 470 which slice is it;
#X text 58 415 5) query by rank;
#X msg 434 350 5;
#X text 432 314 4) select which stat to sort by;
#X text 457 332 -> mean of that descriptor;
#X text 458 349 -> median of that descriptor;
#X text 58 219 3) select which desricptor: it can be changed \, and
which one is used to sort too by changing which channel is selected.
Changing to channel 1 would sort by pitch confidence., f 100;
#X text 41 108 2) trigger the slicing;
#X text 15 10 1) load a soundfile;
#X obj 18 160 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 18 180 fluid.bufpitch -source bufstats_synth -features bufstats_synth_slices_pitches
, f 78;
#X connect 0 0 1 0;
#X connect 5 0 6 0;
#X connect 6 0 39 0;
#X connect 8 0 0 0;
#X connect 9 0 11 0;
#X connect 11 0 10 0;
#X connect 14 0 15 1;
#X connect 15 0 22 0;
#X connect 16 0 17 0;
#X connect 17 0 15 0;
#X connect 18 0 25 0;
#X connect 18 1 27 0;
#X connect 20 0 21 1;
#X connect 21 0 28 0;
#X connect 22 0 18 0;
#X connect 23 0 21 0;
#X connect 24 0 23 0;
#X connect 24 1 20 0;
#X connect 25 0 26 0;
#X connect 26 0 24 0;
#X connect 27 0 20 1;
#X connect 27 0 23 1;
#X connect 28 0 19 0;
#X connect 28 0 19 1;
#X connect 29 0 14 0;
#X connect 32 0 14 0;
#X connect 39 0 40 0;
#X connect 40 0 7 0;
#X restore 611 486 pd musical_example;
#X obj 512 385 array define bufstats_stats 14;
#N canvas 0 23 450 300 (subpatch) 0;
#X obj 83 51 inlet;
#X obj 83 89 pdcontrol;
#X msg 83 71 dir 0 docs/fluid.bufstats.html;
#X msg 143 89 browse \$1;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X restore 684 96 pd;
#X text 553 77 launch the HTML doc->;
#X obj 685 79 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 571 120 note_on_multithreading;
#X connect 3 0 12 0;
#X connect 5 0 3 1;
#X connect 6 0 3 0;
#X connect 7 0 3 2;
#X connect 8 0 3 3;
#X connect 9 0 3 4;
#X connect 10 0 11 0;
#X connect 11 0 20 0;
#X connect 11 1 21 0;
#X connect 11 2 22 0;
#X connect 11 3 23 0;
#X connect 11 4 24 0;
#X connect 11 5 25 0;
#X connect 11 6 26 0;
#X connect 11 7 27 0;
#X connect 11 8 28 0;
#X connect 11 9 29 0;
#X connect 11 10 30 0;
#X connect 11 11 31 0;
#X connect 11 12 32 0;
#X connect 11 13 33 0;
#X connect 12 0 10 0;
#X connect 49 0 47 0;
