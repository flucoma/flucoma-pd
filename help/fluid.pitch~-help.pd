#N canvas 51 57 694 728 12;
#X obj 118 187 osc~ 220;
#N canvas 0 38 450 300 triangle 0;
#X obj 37 47 inlet;
#X obj 37 67 phasor~ 220;
#X obj 37 85 -~ 0.5;
#X obj 37 103 abs~;
#X obj 37 121 *~ 4;
#X obj 37 139 -~ 1;
#X obj 37 160 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X restore 151 209 pd triangle;
#N canvas 0 38 450 300 sawtooth 0;
#X obj 37 37 inlet;
#X obj 37 79 phasor~ 220;
#X obj 37 115 -~ 1;
#X obj 37 97 *~ 2;
#X obj 37 136 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X restore 183 231 pd sawtooth;
#N canvas 0 38 450 300 square 0;
#X obj 37 37 inlet;
#X obj 37 64 phasor~ 220;
#X obj 37 119 -~;
#X obj 51 83 -~ 0.5;
#X obj 51 101 wrap~;
#X obj 37 137 *~ 2;
#X obj 37 158 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 2 1;
#X connect 5 0 6 0;
#X restore 216 253 pd square;
#X floatatom 340 341 5 0 5 0 - - - 0;
#X obj 127 529 unpack f f;
#X floatatom 127 565 8 0 0 0 - - - 0;
#X floatatom 194 591 5 0 0 0 - - - 0;
#X text 81 565 pitch, f 6;
#X text 113 591 confidence, f 11;
#X obj 127 505 fluid.pitch~;
#X obj 17 13 cnv 15 660 42 empty empty fluid.pitch~ 1 22 0 36 #4ba3fb #ffffff 0;
#X obj 509 60 fluid.referencelauncher fluid.pitch~.html reference/pitch/;
#X obj 17 60 cnv 15 488 17 empty empty Real-time\ Pitch\ Descriptor 4 8 0 13 #e0e0e0 #404040 0;
#X text 17 79 Three popular monophonic pitch descriptors \, all of which compute frequency and confidence.;
#X obj 28 691 fluid.out~ fluid.pitchhelp;
#X obj 86 188 vradio 15 1 0 4 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X text 19 201 triangle, f 9;
#X text 47 186 sine, f 5;
#X text 19 216 sawtooth, f 9;
#X text 12 231 rectangle, f 10;
#N canvas 925 -954 652 467 select4 0;
#X obj 94 49 inlet~;
#X obj 34 192 == 0;
#X msg 34 229 \$1 5;
#X obj 34 266 line~;
#X obj 34 334 +~, f 13;
#X obj 182 49 inlet~;
#X msg 122 229 \$1 5;
#X obj 122 266 line~;
#X obj 122 301 *~, f 9;
#X obj 273 49 inlet~;
#X msg 213 229 \$1 5;
#X obj 213 266 line~;
#X obj 213 301 *~, f 9;
#X obj 361 49 inlet~;
#X msg 301 229 \$1 5;
#X obj 301 266 line~;
#X obj 301 301 *~, f 9;
#X obj 213 334 +~, f 13;
#X obj 34 364 +~, f 26;
#X obj 35 396 outlet~;
#X obj 34 301 *~, f 9;
#X obj 34 49 f 0;
#X obj 34 15 inlet;
#X obj 78 15 loadbang;
#X obj 122 192 == 1;
#X obj 213 192 == 2;
#X obj 301 192 == 3;
#X connect 0 0 20 1;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 20 0;
#X connect 4 0 18 0;
#X connect 5 0 8 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 4 1;
#X connect 9 0 12 1;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 17 0;
#X connect 13 0 16 1;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 17 1;
#X connect 17 0 18 1;
#X connect 18 0 19 0;
#X connect 20 0 4 0;
#X connect 21 0 1 0;
#X connect 21 0 24 0;
#X connect 21 0 25 0;
#X connect 21 0 26 0;
#X connect 22 0 21 0;
#X connect 23 0 21 0;
#X connect 24 0 6 0;
#X connect 25 0 10 0;
#X connect 26 0 14 0;
#X restore 86 275 pd select4;
#X f 19;
#X text 417 480 All algorithms use harmonic structure to fine-tune the pitch \, so will not be as effective on sines as on \, say \, sawtooth waves \, with triangle inbetween., f 30;
#N canvas 897 -937 461 267 pinknoise 0;
#X obj 24 145 outlet~;
#X obj 24 43 noise~;
#X obj 24 69 fexpr~ $x1[0] * 0.049922 + $x1[-1] * -0.0959935 + $x1[-2] * 0.0506127 + $x1[-3] * -0.00440879 + $y1[-1] * 2.49496 + $y1[-2] * -2.01727 + $y1[-3] * 0.522189;
#X text 5 163 ref: https://ccrma.stanford.edu/~jos/sasp/Example_Synthesis_1_F_Noise.html with the help of https://uk.mathworks.com/help/matlab/ref/filter.html#buagwwg-2, f 69;
#X text 8 5 pink-noise-approximator taken from the literature. More accurate than ~pink but more expensive too!, f 65;
#X obj 24 122 *~ 5;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 5 0 0 0;
#X restore 245 341 pd pinknoise;
#X obj 57 433 +~;
#X obj 57 667 *~ 0.1;
#X obj 237 505 fiddle~;
#X floatatom 267 590 8 0 0 0 - - - 0;
#X obj 267 554 mtof;
#X text 263 607 compare with PD's fiddle object in noisy contexts., f 21;
#X obj 267 530 unpack 0 0;
#N canvas 423 215 550 822 parameters 0;
#X floatatom 29 499 8 0 0 0 - - - 0;
#X floatatom 29 259 8 0 0 0 - - - 0;
#X floatatom 197 499 8 0 0 0 - - - 0;
#X floatatom 252 199 7 0 0 0 - - - 0;
#X msg 252 167 1024;
#X obj 252 145 loadbang;
#X msg 29 280 algorithm \$1;
#X obj 29 730 r \$0-params;
#X obj 29 753 outlet;
#X obj 29 302 s \$0-params;
#X text 28 6 Optional parameters to fluid.noveltyslice~;
#X obj 29 564 s \$0-params;
#X obj 197 564 s \$0-params;
#X obj 104 145 loadbang;
#X obj 197 456 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 197 415 loadbang;
#X obj 29 456 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 29 415 loadbang;
#X obj 252 302 s \$0-params;
#X obj 248 74 cnv 10 270 2 empty empty empty 20 12 0 14 #bbbbbb #404040 0;
#X text 246 54 FFT settings;
#X obj 28 74 cnv 10 200 2 empty empty empty 20 12 0 14 #bbbbbb #404040 0;
#X text 26 54 Algorithm;
#X obj 29 191 vradio 15 1 0 3 empty empty Algorithm 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X obj 189 384 cnv 10 140 2 empty empty empty 20 12 0 14 #bbbbbb #404040 0;
#X obj 29 384 cnv 10 140 2 empty empty empty 20 12 0 14 #bbbbbb #404040 0;
#X obj 349 384 cnv 10 140 2 empty empty empty 20 12 0 14 #bbbbbb #404040 0;
#X obj 349 564 s \$0-params;
#X obj 419 427 loadbang;
#X text 246 86 If latency is no issue \, higher window size will give more precise results., f 37;
#X text 27 364 minimum frequency;
#X text 187 364 maximum frequency;
#X text 347 364 unit;
#X text 47 190 0: Cepstrum;
#X text 47 205 1: Harmonic Product Spectrum;
#X text 47 220 2: YinFFT;
#X msg 104 167 2;
#X text 26 87 The most reliable algorithm is 2 (default), f 25;
#X msg 252 280 fftsettings \$1 -1 -1;
#X msg 29 537 minfreq \$1;
#X msg 29 477 20;
#X msg 197 537 maxfreq \$1;
#X msg 197 477 10000;
#X msg 349 537 unit \$1;
#X obj 349 477 vradio 15 1 0 2 empty empty Units 0 -8 0 10 #fcfcfc #000000 #000000 0;
#X text 367 476 0: Hz;
#X text 367 495 1: MIDI pitch;
#X msg 419 451 0;
#X connect 0 0 39 0;
#X connect 1 0 6 0;
#X connect 2 0 41 0;
#X connect 3 0 38 0;
#X connect 4 0 3 0;
#X connect 5 0 4 0;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 13 0 36 0;
#X connect 14 0 42 0;
#X connect 15 0 14 0;
#X connect 16 0 40 0;
#X connect 17 0 16 0;
#X connect 23 0 1 0;
#X connect 28 0 47 0;
#X connect 36 0 23 0;
#X connect 38 0 18 0;
#X connect 39 0 11 0;
#X connect 40 0 0 0;
#X connect 41 0 12 0;
#X connect 42 0 2 0;
#X connect 43 0 27 0;
#X connect 44 0 43 0;
#X connect 47 0 44 0;
#X restore 221 441 pd parameters;
#X text 323 440 see fluid.pitch~ parameters;
#X obj 524 653 cnv 15 149 50 empty empty More\ information 4 10 0 13 #e0e0e0 #404040 0;
#N canvas 230 112 695 931 confidence 0;
#X obj 20 398 readsf~;
#X obj 20 537 delwrite~ \$0-latencycomp 1000, f 20;
#X obj 373 387 r pd-dsp-started;
#X obj 373 416 samplerate~;
#X obj 20 640 delread~ \$0-latencycomp 1, f 19;
#X obj 281 471 fluid.pitch~;
#X obj 281 628 line~;
#X obj 138 743 *~, f 21;
#N canvas 512 268 1103 698 cool_delays 0;
#X obj 15 381 inlet~;
#X obj 273 287 outlet~;
#X obj 612 289 outlet~;
#X text 51 502 987Hz 0.15q 0.8gain;
#X text 358 495 1987Hz 0.15q 0.8gain;
#X text 744 496 1456Hz 0.15q 0.8gain;
#X obj 430 229 delread4~ \$0-centre 567;
#X obj 747 472 delwrite~ \$0-centre 567;
#X obj 430 249 *~ 0.6;
#X obj 430 285 *~ 0.3;
#X obj 75 64 osc~ 1;
#X obj 159 63 osc~ 4.09082;
#X obj 313 71 osc~ 2.93801;
#X obj 413 72 osc~ 2.37663;
#X obj 76 131 *~;
#X obj 239 128 *~;
#X obj 388 120 *~;
#X obj 70 229 delread4~ \$0-left 123;
#X obj 44 472 delwrite~ \$0-left 123;
#X obj 689 229 delread4~ \$0-right 345;
#X obj 358 469 delwrite~ \$0-right 345;
#X obj 76 152 +~ 122;
#X obj 239 149 +~ 566;
#X obj 388 141 +~ 344;
#X msg 851 292 clear;
#X obj 44 429 bp~ 987 0.15;
#X obj 358 429 bp~ 1987 0.15;
#X obj 747 429 bp~ 1456 0.15;
#X obj 747 451 *~ 0.4;
#X obj 359 449 *~ 0.4;
#X obj 44 450 *~ 0.4;
#X connect 0 0 25 0;
#X connect 0 0 26 0;
#X connect 0 0 27 0;
#X connect 6 0 8 0;
#X connect 8 0 1 0;
#X connect 8 0 2 0;
#X connect 8 0 9 0;
#X connect 9 0 25 0;
#X connect 9 0 26 0;
#X connect 10 0 14 0;
#X connect 10 0 15 0;
#X connect 11 0 14 1;
#X connect 12 0 15 1;
#X connect 12 0 16 0;
#X connect 13 0 16 1;
#X connect 14 0 21 0;
#X connect 15 0 22 0;
#X connect 16 0 23 0;
#X connect 17 0 1 0;
#X connect 17 0 26 0;
#X connect 19 0 2 0;
#X connect 19 0 25 0;
#X connect 19 0 27 0;
#X connect 21 0 17 0;
#X connect 22 0 6 0;
#X connect 23 0 19 0;
#X connect 24 0 25 0;
#X connect 24 0 26 0;
#X connect 24 0 27 0;
#X connect 25 0 30 0;
#X connect 26 0 29 0;
#X connect 27 0 28 0;
#X connect 28 0 7 0;
#X connect 29 0 20 0;
#X connect 30 0 18 0;
#X restore 138 771 pd cool_delays;
#X obj 281 583 change;
#X text 18 104 using the pitch confidence of a source to control what gets sent to a delay effect, f 64;
#X msg 281 416 getlatency;
#X obj 281 606 pack f 10;
#X obj 17 13 cnv 15 660 42 empty empty fluid.pitch~ 1 22 0 36 #4ba3fb #ffffff 0;
#X obj 17 60 cnv 15 488 17 empty empty pitchiness-driven\ processing\ fun 4 8 0 13 #e0e0e0 #404040 0;
#X obj 20 886 fluid.out~ fluid.pitchhelp;
#X obj 373 439 value samplerate;
#X obj 20 613 expr $f1*1000/samplerate;
#X floatatom 362 513 5 0 0 0 - - - 0;
#X obj 556 188 loadbang;
#X floatatom 236 604 5 0 0 0 - - - 0;
#X text 355 594 only on when pitch confidence is above thresh, f 24;
#X floatatom 432 535 5 0 0 0 - - - 0;
#X obj 281 560 expr ($f2 > $f3) * 0.3;
#X msg 31 223 open media/Tremblay-ASWINE-ScratchySynth-M.wav \, 1 \; threshold 0.98, f 52;
#X msg 44 258 open media/Tremblay-UW-ComplexDescent-M.wav \, 1 \; threshold 0.6, f 52;
#X msg 60 293 open media/Tremblay-FMTriDist-M.wav \, 1 \; threshold 0.5, f 52;
#X msg 73 328 open media/Tremblay-Iterative-M.wav \, 1 \; threshold 0.9, f 52;
#X msg 21 188 open media/Tremblay-AaS-SynthTwoVoices-M.wav \, 1 \; threshold 0.8, f 52;
#X obj 432 510 r threshold;
#X msg 556 210 \; threshold 0.98;
#X obj 18 156 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X text 18 155 1) click any of these 'presets' to start playing a file with an associated threshold of confidence to send to the delays;
#X obj 92 890 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X text 94 889 2) Audio on.;
#X connect 0 0 1 0;
#X connect 0 0 5 0;
#X connect 2 0 3 0;
#X connect 2 0 11 0;
#X connect 3 0 16 0;
#X connect 4 0 15 0;
#X connect 4 0 15 1;
#X connect 4 0 7 0;
#X connect 5 0 23 0;
#X connect 5 1 18 0;
#X connect 6 0 7 1;
#X connect 7 0 8 0;
#X connect 8 0 15 0;
#X connect 8 1 15 1;
#X connect 9 0 12 0;
#X connect 11 0 5 0;
#X connect 12 0 6 0;
#X connect 17 0 4 0;
#X connect 18 0 17 0;
#X connect 19 0 30 0;
#X connect 22 0 23 2;
#X connect 23 0 9 0;
#X connect 23 0 20 0;
#X connect 24 0 0 0;
#X connect 25 0 0 0;
#X connect 26 0 0 0;
#X connect 27 0 0 0;
#X connect 28 0 0 0;
#X connect 29 0 22 0;
#X restore 537 678 pd confidence;
#X obj 87 167 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X text 89 166 1) Pick a source;
#X obj 384 342 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X obj 245 370 *~ 0, f 14;
#X text 386 341 3) Add noise to test the sturdiness of the detection, f 27;
#X obj 97 699 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X text 99 698 2) Audio on.;
#X connect 0 0 21 1;
#X connect 1 0 21 2;
#X connect 2 0 21 3;
#X connect 3 0 21 4;
#X connect 4 0 38 1;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 10 0 5 0;
#X connect 16 0 21 0;
#X connect 21 0 24 0;
#X connect 23 0 38 0;
#X connect 24 0 25 0;
#X connect 24 0 26 0;
#X connect 24 0 10 0;
#X connect 25 0 15 0;
#X connect 25 0 15 1;
#X connect 26 2 30 0;
#X connect 28 0 27 0;
#X connect 30 0 28 0;
#X connect 31 0 10 0;
#X connect 38 0 24 1;
