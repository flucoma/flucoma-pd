#N canvas 18 40 725 944 12;
#N canvas 322 127 711 919 musical_example 0;
#X obj 23 713 * 1000;
#X obj 363 673 / 1;
#X obj 247 624 fluid.onsetslice~;
#X obj 381 624 r pd-dsp-started;
#X obj 381 648 samplerate~;
#X obj 24 843 fluid.out~ onsetslice-help;
#N canvas 69 -1055 1728 1027 guts 0;
#X obj 102 320 r _tg;
#X obj 102 344 route 0;
#X obj 102 368 t b f, f 49;
#X obj 452 368 route 0 1 2 3 4 5 6 7 8 9;
#X obj 112 600 r _tg;
#X obj 112 648 t b f, f 49;
#X obj 462 648 route 0 1 2 3 4 5 6 7 8 9;
#X obj 112 624 route 1;
#X obj 112 860 r _tg;
#X obj 112 908 t b f, f 49;
#X obj 462 908 route 0 1 2 3 4 5 6 7 8 9;
#X obj 112 884 route 2;
#X obj 102 1140 r _tg;
#X obj 102 1188 t b f, f 49;
#X obj 452 1188 route 0 1 2 3 4 5 6 7 8 9;
#X obj 112 1420 r _tg;
#X obj 112 1468 t b f, f 49;
#X obj 462 1468 route 0 1 2 3 4 5 6 7 8 9;
#X obj 112 1680 r _tg;
#X obj 112 1728 t b f, f 49;
#X obj 462 1728 route 0 1 2 3 4 5 6 7 8 9;
#X obj 102 1164 route 3;
#X obj 112 1444 route 4;
#X obj 112 1704 route 5;
#X obj 112 1960 r _tg;
#X obj 112 2008 t b f, f 49;
#X obj 462 2008 route 0 1 2 3 4 5 6 7 8 9;
#X obj 112 1984 route 6;
#X obj 100 100 cnv 15 470 170 empty empty empty 20 12 0 14 #f9e09e
#404040 0;
#X obj 391 128 fluid.onsetslice.help.ch 0 1;
#X obj 373 128 fluid.onsetslice.help.ch 0 0;
#X obj 409 128 fluid.onsetslice.help.ch 0 2;
#X obj 427 128 fluid.onsetslice.help.ch 0 3;
#X obj 499 128 fluid.onsetslice.help.ch 0 7;
#X obj 517 128 fluid.onsetslice.help.ch 0 8;
#X obj 535 128 fluid.onsetslice.help.ch 0 9;
#X obj 373 147 fluid.onsetslice.help.ch 1 0;
#X obj 409 147 fluid.onsetslice.help.ch 1 2;
#X obj 427 147 fluid.onsetslice.help.ch 1 3;
#X obj 481 147 fluid.onsetslice.help.ch 1 6;
#X obj 499 147 fluid.onsetslice.help.ch 1 7;
#X obj 517 147 fluid.onsetslice.help.ch 1 8;
#X obj 535 147 fluid.onsetslice.help.ch 1 9;
#X obj 373 166 fluid.onsetslice.help.ch 2 0;
#X obj 391 166 fluid.onsetslice.help.ch 2 1;
#X obj 409 166 fluid.onsetslice.help.ch 2 2;
#X obj 427 166 fluid.onsetslice.help.ch 2 3;
#X obj 463 166 fluid.onsetslice.help.ch 2 5;
#X obj 535 166 fluid.onsetslice.help.ch 2 9;
#X obj 373 185 fluid.onsetslice.help.ch 3 0;
#X obj 535 185 fluid.onsetslice.help.ch 3 9;
#X obj 409 204 fluid.onsetslice.help.ch 4 2;
#X obj 427 204 fluid.onsetslice.help.ch 4 3;
#X obj 517 204 fluid.onsetslice.help.ch 4 8;
#X obj 535 204 fluid.onsetslice.help.ch 4 9;
#X text 374 108 0, f 2;
#X text 393 108 1, f 2;
#X text 411 108 2, f 2;
#X text 428 108 3, f 2;
#X text 446 108 4, f 2;
#X text 464 108 5, f 2;
#X text 481 108 6, f 2;
#X text 500 108 7, f 2;
#X text 518 108 8, f 2;
#X text 536 108 9, f 2;
#X obj 481 204 fluid.onsetslice.help.ch 4 6;
#X obj 373 242 fluid.onsetslice.help.ch 6 0;
#X obj 391 242 fluid.onsetslice.help.ch 6 1;
#X obj 409 242 fluid.onsetslice.help.ch 6 2;
#X obj 481 242 fluid.onsetslice.help.ch 6 6;
#X obj 517 223 fluid.onsetslice.help.ch 5 8;
#X text 325 108 metric;
#X obj 391 147 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 445 147 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 373 204 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 373 223 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 391 204 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 391 223 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 391 185 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 409 185 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 427 185 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 445 185 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 445 204 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 445 223 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 445 242 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 427 242 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 427 223 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 409 223 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 445 166 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 445 128 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 463 147 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 463 185 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 463 204 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 463 223 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 463 242 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 463 128 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 481 185 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 499 185 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 517 185 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 481 166 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 499 166 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 517 166 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 481 223 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 499 223 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 499 204 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 499 242 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 481 128 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 535 223 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 535 242 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X obj 517 242 cnv 16 16 16 empty empty empty 20 12 0 14 #dfdfdf #404040
0;
#X text 116 127 Nicol-LoopE-M.wav;
#X text 116 146 Tremblay-AaS-AcousticStrums-M.wav;
#X text 116 165 Tremblay-ASWINE-ScratchySynth-M.wav;
#X text 116 184 Tremblay-BaB-HumDC-M.wav;
#X text 116 203 Tremblay-beatRemember.wav;
#X text 116 222 Tremblay-UW-ComplexDescent-M.wav;
#X text 116 241 Tremblay-FMTriDist-M.wav;
#X msg 252 592 \; metrics 0 0.2 66 5 128 -1 -1;
#X msg 370 480 \; metrics 3 1.1 40 5 128 64 256;
#X msg 284 555 \; metrics 1 2 50 9 128 64 128;
#X msg 323 516 \; metrics 2 0.06 55 7 128 64 128;
#X msg 542 608 \; metrics 7 0.2 45 9 128 64 128;
#X msg 559 570 \; metrics 8 0.1 45 9 128 64 128;
#X msg 576 533 \; metrics 9 0.15 45 7 128 64 128;
#X msg 462 861 \; metrics 0 4 45 7 512 64 1024;
#X msg 496 825 \; metrics 2 0.05 45 3 512 64 1024;
#X msg 462 1122 \; metrics 0 0.11 45 7 128 64 128;
#X msg 479 1086 \; metrics 1 0.85 45 5 128 64 256;
#X msg 496 1050 \; metrics 2 0.15 45 7 128 64 128;
#X msg 513 1012 \; metrics 3 3.35 45 7 128 64 128;
#X msg 548 975 \; metrics 5 0.04 45 5 128 64 128;
#X msg 616 934 \; metrics 9 0.13 45 5 128 64 128;
#X msg 513 788 \; metrics 3 1 45 3 512 64 1024;
#X msg 565 739 \; metrics 6 0.09 45 11 512 64 1024;
#X msg 582 700 \; metrics 7 0.48 45 7 512 64 1024;
#X msg 709 863 \; metrics 8 0.36 45 7 512 64 1024;
#X msg 736 824 \; metrics 9 0.25 45 5 512 64 1024;
#X msg 452 1412 \; metrics 0 0.14 45 5 128 64 128;
#X msg 606 1214 \; metrics 9 0.14 45 5 128 64 128;
#X msg 496 1662 \; metrics 2 0.107 45 7 512 64 2048;
#X msg 513 1626 \; metrics 3 0.27 45 7 512 64 8192;
#X msg 565 1584 \; metrics 6 0.08 45 7 512 64 2048;
#X msg 599 1536 \; metrics 8 0.25 45 7 512 64 4096;
#X msg 616 1494 \; metrics 9 0.25 45 7 512 64 4096;
#X msg 599 1776 \; metrics 8 0.666 45 5 512 64 8192;
#X msg 462 2232 \; metrics 0 1.8 45 5 1024 64 2048;
#X msg 479 2196 \; metrics 1 45 7 2048 64 2048;
#X msg 496 2160 \; metrics 2 0.005 45 7 2048 64 2048;
#X obj 945 63 loadbang;
#X obj 889 262 soundfiler;
#X obj 761 122 array define src1;
#X obj 761 101 array define src0;
#X obj 761 143 array define src2;
#X obj 761 164 array define src3;
#X obj 761 185 array define src4;
#X obj 761 206 array define src5;
#X obj 761 227 array define src6;
#X msg 889 100 read -resize ./media/Nicol-LoopE-M.wav src0;
#X msg 899 121 read -resize ./media/Tremblay-AaS-AcousticStrums-M.wav
src1;
#X msg 909 142 read -resize ./media/Tremblay-ASWINE-ScratchySynth-M.wav
src2, f 63;
#X msg 919 163 read -resize ./media/Tremblay-BaB-HumDC-M.wav src3;
#X msg 929 184 read -resize ./media/Tremblay-beatRemember.wav src4
;
#X msg 939 205 read -resize ./media/Tremblay-UW-ComplexDescent-M.wav
src5;
#X msg 949 226 read -resize ./media/Tremblay-FMTriDist-M.wav src6;
#X msg 112 1495 \; src symbol src4;
#X msg 102 1215 \; src symbol src3;
#X msg 112 935 \; src symbol src2;
#X msg 112 675 \; src symbol src1;
#X msg 102 395 \; src symbol src0;
#X msg 112 2035 \; src symbol src6;
#X msg 112 1755 \; src symbol src5;
#X msg 548 2122 \; metrics 6 0.001 45 7 2048 64 2048;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 168 0;
#X connect 2 1 3 0;
#X connect 3 0 117 0;
#X connect 3 1 119 0;
#X connect 3 2 120 0;
#X connect 3 3 118 0;
#X connect 3 7 121 0;
#X connect 3 8 122 0;
#X connect 3 9 123 0;
#X connect 4 0 7 0;
#X connect 5 0 167 0;
#X connect 5 1 6 0;
#X connect 6 0 124 0;
#X connect 6 2 125 0;
#X connect 6 3 132 0;
#X connect 6 6 133 0;
#X connect 6 7 134 0;
#X connect 6 8 135 0;
#X connect 6 9 136 0;
#X connect 7 0 5 0;
#X connect 8 0 11 0;
#X connect 9 0 166 0;
#X connect 9 1 10 0;
#X connect 10 0 126 0;
#X connect 10 1 127 0;
#X connect 10 2 128 0;
#X connect 10 3 129 0;
#X connect 10 5 130 0;
#X connect 10 9 131 0;
#X connect 11 0 9 0;
#X connect 12 0 21 0;
#X connect 13 0 165 0;
#X connect 13 1 14 0;
#X connect 14 0 137 0;
#X connect 14 9 138 0;
#X connect 15 0 22 0;
#X connect 16 0 164 0;
#X connect 16 1 17 0;
#X connect 17 2 139 0;
#X connect 17 3 140 0;
#X connect 17 6 141 0;
#X connect 17 8 142 0;
#X connect 17 9 143 0;
#X connect 18 0 23 0;
#X connect 19 0 170 0;
#X connect 19 1 20 0;
#X connect 20 8 144 0;
#X connect 21 0 13 0;
#X connect 22 0 16 0;
#X connect 23 0 19 0;
#X connect 24 0 27 0;
#X connect 25 0 169 0;
#X connect 25 1 26 0;
#X connect 26 0 145 0;
#X connect 26 1 146 0;
#X connect 26 2 147 0;
#X connect 26 6 171 0;
#X connect 27 0 25 0;
#X connect 148 0 157 0;
#X connect 148 0 163 0;
#X connect 148 0 162 0;
#X connect 148 0 161 0;
#X connect 148 0 160 0;
#X connect 148 0 159 0;
#X connect 148 0 158 0;
#X connect 157 0 149 0;
#X connect 158 0 149 0;
#X connect 159 0 149 0;
#X connect 160 0 149 0;
#X connect 161 0 149 0;
#X connect 162 0 149 0;
#X connect 163 0 149 0;
#X coords 0 -1 1 1 470 170 1 100 100;
#X restore 19 163 pd guts;
#X obj 17 13 cnv 15 660 42 empty empty fluid.onsetslice~ 1 22 0 36
#4ba3fb #ffffff 0;
#X obj 17 60 cnv 15 488 17 empty empty Try\\\ different\\\ combinations\\\ of\\\ algorithms
4 8 0 13 #e0e0e0 #404040 0;
#X text 19 98 Different onset detection metrics will be more or less
effective on different types of material;
#X text 498 185 Some curated options from the fluid decomposition example
files \, and metrics for which we got acceptable results., f 25;
#N canvas 915 -981 1698 892 parameters 0;
#X floatatom 215 218 8 0 0 0 - - - 0;
#X floatatom 185 196 8 0 0 0 - - - 0;
#X floatatom 225 240 8 0 0 0 - - - 0;
#X obj 102 638 outlet;
#X msg 123 381 threshold \$1;
#X floatatom 155 175 8 0 0 0 - - - 0;
#X msg 103 359 metric \$1;
#X text 103 99 0: Energy, f 17;
#X text 103 110 1: HFC, f 11;
#X text 103 121 2: SpectralFlux;
#X text 103 132 3: MKL;
#X text 103 142 4: IS, f 17;
#X text 103 152 5: Cosine, f 11;
#X text 216 99 6: PhaseDev;
#X text 216 111 7: WPhaseDev;
#X text 216 121 8: ComplexDev;
#X text 216 132 9: RComplexDev;
#X msg 153 402 minslicelength \$1;
#X msg 195 424 filtersize \$1;
#X floatatom 242 262 8 0 0 0 - - - 0;
#X floatatom 365 262 8 0 0 0 - - - 0;
#X floatatom 304 262 8 0 0 0 - - - 0;
#X obj 393 447 pack f f f, f 27;
#X obj 454 385 t b f;
#X obj 547 383 t b f;
#X msg 230 446 fftsettings \$1 \$2 \$3 \, getlatency, f 21;
#X obj 97 17 loadbang;
#X msg 97 38 \; metrics 0 0.5 2 5 1024 -1 -1;
#X text 104 175 metric;
#X text 113 196 threshold;
#X text 109 218 minslicelength;
#X text 148 239 filtersize;
#X text 155 262 fftsettings;
#X obj 473 38 unpack 0 0 0 0 0 0 0;
#X obj 473 15 r metrics;
#X obj 640 36 print metrics;
#X connect 0 0 17 0;
#X connect 1 0 4 0;
#X connect 2 0 18 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 3 0;
#X connect 17 0 3 0;
#X connect 18 0 3 0;
#X connect 19 0 22 0;
#X connect 20 0 24 0;
#X connect 21 0 23 0;
#X connect 22 0 25 0;
#X connect 23 0 22 0;
#X connect 23 1 22 1;
#X connect 24 0 22 0;
#X connect 24 1 22 2;
#X connect 25 0 3 0;
#X connect 26 0 27 0;
#X connect 33 0 5 0;
#X connect 33 1 1 0;
#X connect 33 2 0 0;
#X connect 33 3 2 0;
#X connect 33 4 19 0;
#X connect 33 5 21 0;
#X connect 33 6 20 0;
#X connect 34 0 33 0;
#X connect 34 0 35 0;
#X coords 0 -1 1 1 345 185 2 100 100;
#X restore 247 422 pd parameters;
#X obj 22 559 delwrite~ latency-\$0 1000;
#X obj 23 736 delread~ latency-\$0;
#X obj 22 449 tabplay~;
#X msg 22 419 set \$1 \, 1;
#X obj 22 393 r src;
#X listbox 65 393 20 0 0 0 - - - 0;
#X connect 0 0 13 0;
#X connect 1 0 0 0;
#X connect 2 0 5 1;
#X connect 2 1 1 0;
#X connect 3 0 4 0;
#X connect 4 0 1 1;
#X connect 11 0 2 0;
#X connect 13 0 5 0;
#X connect 14 0 2 0;
#X connect 14 0 12 0;
#X connect 15 0 14 0;
#X connect 16 0 15 0;
#X connect 16 0 17 0;
#X restore 547 659 pd musical_example;
#X text 35 860 Once latency compensated with the delay as above \,
the detected position is always at the start of the spectral frame
in which an onset appears. Change the window size above to observe
the changes., f 95;
#X obj 17 13 cnv 15 660 42 empty empty fluid.onsetslice~ 1 22 0 36
#4ba3fb #ffffff 0;
#X obj 510 60 fluid.referencelauncher fluid.onsetslice~.html reference/onsetslice/
;
#X obj 17 60 cnv 15 488 17 empty empty Spectral\\\ Difference-Based\\\ Real-Time\\\ Audio\\\ Slicer
4 8 0 13 #e0e0e0 #404040 0;
#X text 17 79 Implements a selection of spectrum-based onset slicers
;
#X obj 18 149 phasor~ 1.11;
#X obj 18 193 clip~ 0 1;
#X obj 18 171 biquad~ 0 0 -1 1 0;
#X obj 18 254 delwrite~ \$0-latencycomp 100;
#X obj 303 181 r pd-dsp-started;
#X obj 479 285 samplerate~;
#X obj 303 207 t b b, f 25;
#X obj 461 316 / 1;
#X msg 303 238 getlatency;
#X obj 96 382 delread~ \$0-latencycomp;
#X obj 96 358 * 1000;
#X obj 38 812 snapshot~;
#X floatatom 38 837 5 0 0 0 - - - 0;
#X obj 48 786 metro 100;
#X obj 48 764 loadbang;
#X obj 242 669 samphold~;
#X obj 38 719 -~, f 30;
#X obj 38 669 samphold~;
#X obj 133 594 fexpr~ $y1[-1] + 1;
#X text 81 837 spectral frame accurate detection, f 55;
#X obj 303 264 fluid.onsetslice~ -threshold 1e-06 -fftsettings 50,
f 23;
#X obj 104 489 fluid.onsetslice.help.scope A;
#X obj 308 488 fluid.onsetslice.help.scope B;
#X obj 512 488 fluid.onsetslice.help.scope C;
#X obj 310 416 +~;
#X text 155 438 original \, latency-compensated, f 20;
#X text 579 438 output of fluid.onsetslice~, f 18;
#X text 339 447 both signals added, f 20;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 7 0 26 0;
#X connect 8 0 7 0;
#X connect 10 0 12 0;
#X connect 11 0 13 1;
#X connect 12 0 14 0;
#X connect 12 1 11 0;
#X connect 13 0 16 0;
#X connect 14 0 26 0;
#X connect 15 0 23 1;
#X connect 15 0 30 0;
#X connect 15 0 27 0;
#X connect 16 0 15 0;
#X connect 17 0 18 0;
#X connect 19 0 17 0;
#X connect 20 0 19 0;
#X connect 21 0 22 1;
#X connect 22 0 17 0;
#X connect 23 0 22 0;
#X connect 24 0 23 0;
#X connect 24 0 21 0;
#X connect 26 0 21 1;
#X connect 26 0 30 1;
#X connect 26 0 29 0;
#X connect 26 1 13 0;
#X connect 30 0 28 0;
