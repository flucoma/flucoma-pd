#N canvas 50 38 695 780 12;
#X obj 17 13 cnv 15 660 42 empty empty fluid.bufhpss 1 22 0 36 #4ba3fb
#ffffff 0;
#X obj 509 60 fluid.referencelauncher fluid.hpss.html reference/hpss/
;
#X obj 17 60 cnv 15 488 17 empty empty Buffer-Based\\\ Harmonic-Percussive\\\ Source\\\ Separation\\\ Using
4 8 0 13 #e0e0e0 #404040 0;
#X text 17 109 FluidBufHPSS performs Harmonic-Percussive Source Separation
(HPSS) on the contents of a Buffer., f 68;
#X obj 17 78 cnv 15 488 17 empty empty Median\\\ Filtering 4 8 0 13
#e0e0e0 #404040 0;
#X obj 449 615 cnv 15 228 145 empty empty More\\\ information 4 10
0 13 #e0e0e0 #404040 0;
#X obj 456 730 note_on_multithreading;
#X obj 456 708 note_on_automatic_multiarrays;
#N canvas 232 126 693 603 multichannel 0;
#X obj 329 122 bng 15 250 50 0 empty empty empty 17 7 0 10 #c6ffc7
#000000 #000000;
#X obj 349 122 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X text 350 121 2) decompose;
#X obj 329 244 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X text 329 265 bang when done;
#X obj 22 425 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 41 424 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X text 42 424 4) audition results, f 23;
#N canvas 1684 -917 1108 745 playresults 0;
#X obj -189 171 inlet;
#X obj -189 505 *~;
#X obj -51 505 *~;
#X obj 87 505 *~;
#X obj -189 532 +~, f 20;
#X obj -189 556 +~, f 40;
#X obj -189 580 outlet~;
#X obj 104 123 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 104 140 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 104 106 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X text 119 102 source;
#X text 99 69 select components:, f 20;
#X obj 312 36 loadbang;
#X msg 312 61 1;
#X obj -189 241 tabplay~ help.mc.src.3-0, f 16;
#X obj 224 505 *~;
#X obj 363 505 *~;
#X obj 508 505 *~;
#X obj 224 532 +~, f 20;
#X obj 224 556 +~, f 42;
#X obj 224 580 outlet~;
#X obj 225 240 tabplay~ help.mc.src.3-1, f 18;
#X obj -189 205 t b b b b b b, f 99;
#X text 119 120 harmonic;
#X text 121 138 percussive;
#X obj -51 281 tabplay~ help.hpss.harmonic.4-0;
#X obj 363 284 tabplay~ help.hpss.harmonic.4-1;
#X obj 87 340 tabplay~ help.hpss.percussive.4-0;
#X obj 501 334 tabplay~ help.hpss.percussive.4-1;
#X connect 0 0 22 0;
#X connect 1 0 4 0;
#X connect 2 0 4 1;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 2 1;
#X connect 7 0 16 1;
#X connect 8 0 3 1;
#X connect 8 0 17 1;
#X connect 9 0 1 1;
#X connect 9 0 15 1;
#X connect 12 0 13 0;
#X connect 13 0 9 0;
#X connect 14 0 1 0;
#X connect 15 0 18 0;
#X connect 16 0 18 1;
#X connect 17 0 19 1;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 21 0 15 0;
#X connect 22 0 14 0;
#X connect 22 1 25 0;
#X connect 22 2 27 0;
#X connect 22 3 21 0;
#X connect 22 4 26 0;
#X connect 22 5 28 0;
#X connect 25 0 2 0;
#X connect 26 0 16 0;
#X connect 27 0 3 0;
#X connect 28 0 17 0;
#X coords 0 -1 1 1 96 60 2 100 100;
#X restore 22 470 pd playresults;
#X f 15;
#X obj 93 550 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X text 94 548 3) audio on, f 16;
#X text 17 79 Processing multichannel inputs;
#X obj 22 546 fluid.out~ buftransientshelp;
#X obj 17 13 cnv 15 660 42 empty empty fluid.bufhpss 1 22 0 36 #4ba3fb
#ffffff 0;
#X obj 481 504 clone 2 fluid.multiarray help.hpss.harmonic.4, f 26
;
#X obj 481 544 clone 2 fluid.multiarray help.hpss.percussive.4, f
26;
#N canvas 1687 -826 550 256 loadsrc 0;
#X obj 16 173 soundfiler;
#X obj 16 205 outlet;
#X obj 96 173 soundfiler;
#X obj 16 36 t b b, f 12;
#X msg 16 71 read -resize media/Nicol-LoopE-M.wav help.mc.src.1, f
39;
#X msg 96 115 read -resize media/Tremblay-AaS-VoiceQC-B2K-M.wav help.mc.src.2
, f 38;
#X obj 16 9 inlet;
#X connect 0 0 1 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 4 0 0 0;
#X connect 5 0 2 0;
#X connect 6 0 3 0;
#X restore 19 154 pd loadsrc;
#X obj 39 122 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X text 40 121 1) compose a radical stereo source;
#N canvas 1905 -458 495 381 stereo_source 0;
#X obj 31 29 inlet;
#X msg 31 53 reset \, source help.mc.src.1 \, bang \, source help.mc.src.2
\, deststartchan 1 \, bang;
#X obj 31 91 fluid.bufcompose -destination help.mc.src.3;
#X obj 31 115 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X restore 19 190 pd stereo_source;
#X msg 19 226 waveform help.mc.src.3;
#X obj 19 250 fluid.waveform 280 130 0 empty empty 0;
#X obj 19 122 bng 15 250 50 0 empty empty empty 17 7 0 10 #c6ffc7 #000000
#000000;
#X obj 481 418 array define help.mc.src.1;
#X obj 481 441 array define help.mc.src.2;
#X obj 481 464 clone 2 fluid.multiarray help.mc.src.3, f 26;
#X obj 329 150 fluid.bufhpss -source help.mc.src.3 -harmonic help.hpss.harmonic.4
-percussive help.hpss.percussive.4, f 35;
#X connect 0 0 26 0;
#X connect 5 0 8 0;
#X connect 8 0 12 0;
#X connect 8 1 12 1;
#X connect 16 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 22 0 16 0;
#X connect 26 0 3 0;
#X restore 456 686 pd multichannel;
#N canvas 386 69 692 805 mode_1 0;
#X obj 17 13 cnv 15 660 42 empty empty fluid.bufhpss 1 22 0 36 #4ba3fb
#ffffff 0;
#X text 17 69 use mode 1 for more extreme separation;
#X text 17 99 In mode 0 \, fluid.hpss~ uses a soft-masking approach
that produces smooth results at the cost of how separated they are.
, f 94;
#X text 17 139 In modes 1 and 2 \, a binary mask is used instead \,
where a component is designated as being harmonic or percussive if
the respective median filter output exceeds some threshold. This yields
greater separation \, but can have more audible artefacts., f 94;
#X text 17 199 fluid.hpss~ lets you adjust this threshold with respect
to frequency \, to enable fine-tuning. In mode 1 \, just use the harmthresh
attribute \, which will internally make a complementary threshold for
the percussive part – guaranteeing that the two components still
sum to the source., f 94;
#N canvas 1955 -858 567 271 loadsrc 0;
#X obj 16 83 soundfiler;
#X obj 16 115 outlet;
#X obj 16 19 inlet;
#X msg 16 41 read -resize \$1 help.hpss.src.2-0 help.hpss.src.2-1;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X restore 18 358 pd loadsrc;
#X obj 18 291 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X obj 18 310 fluid.demoaudiofiles;
#X text 19 291 1) select a source;
#X obj 22 660 clone 2 fluid.multiarray help.hpss.src.2, f 26;
#X obj 22 704 clone 2 fluid.multiarray help.hpss.harmonic.2, f 26
;
#X obj 22 749 clone 2 fluid.multiarray help.hpss.percussive.2, f 26
;
#X obj 26 458 bng 15 250 50 0 empty empty empty 17 7 0 10 #c6ffc7 #000000
#000000;
#X obj 45 457 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#N canvas 1476 -888 1605 860 playresults 0;
#X obj -189 171 inlet;
#X obj -189 505 *~;
#X obj -51 505 *~;
#X obj 87 505 *~;
#X obj -189 532 +~, f 20;
#X obj -189 596 +~, f 40;
#X obj -189 620 outlet~;
#X obj 104 123 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 104 140 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 104 106 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X text 119 102 source;
#X text 99 69 select components:, f 20;
#X obj 312 36 loadbang;
#X msg 312 61 1;
#X obj 224 505 *~;
#X obj 363 505 *~;
#X obj 508 505 *~;
#X obj 224 532 +~, f 20;
#X obj 224 596 +~, f 42;
#X obj 224 620 outlet~;
#X text 119 120 harmonic;
#X text 121 138 percussive;
#X obj 104 157 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X text 121 155 residual;
#X obj -189 205 t b b b b b b b b, f 99;
#X obj 225 240 tabplay~ help.hpss.src.2-1;
#X obj 363 284 tabplay~ help.hpss.harmonic.2-1;
#X obj 501 334 tabplay~ help.hpss.percussive.2-1;
#X obj 87 340 tabplay~ help.hpss.percussive.2-0;
#X obj -51 281 tabplay~ help.hpss.harmonic.2-0;
#X obj -189 241 tabplay~ help.hpss.src.2-0;
#X connect 0 0 24 0;
#X connect 1 0 4 0;
#X connect 2 0 4 1;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 2 1;
#X connect 7 0 15 1;
#X connect 8 0 3 1;
#X connect 8 0 16 1;
#X connect 9 0 1 1;
#X connect 9 0 14 1;
#X connect 12 0 13 0;
#X connect 13 0 9 0;
#X connect 14 0 17 0;
#X connect 15 0 17 1;
#X connect 16 0 18 1;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 24 0 30 0;
#X connect 24 1 29 0;
#X connect 24 2 28 0;
#X connect 24 3 25 0;
#X connect 24 4 26 0;
#X connect 24 5 27 0;
#X connect 25 0 14 0;
#X connect 26 0 15 0;
#X connect 27 0 16 0;
#X connect 28 0 3 0;
#X connect 29 0 2 0;
#X connect 30 0 1 0;
#X coords 0 -1 1 1 96 60 2 100 100;
#X restore 26 503 pd playresults;
#X f 15;
#X obj 97 583 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X obj 26 579 fluid.out~ buftransientshelp;
#X text 46 457 5) audition results, f 23;
#X text 98 581 4) audio on, f 16;
#X obj 266 685 bng 15 250 50 0 empty empty empty 17 7 0 10 #c6ffc7
#000000 #000000;
#X obj 285 684 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X text 286 684 3) process, f 11;
#X obj 266 708 fluid.bufhpss -source help.hpss.src.2 -harmonic help.hpss.harmonic.2
-percussive help.hpss.percussive.2 -maskingmode 1;
#X obj 266 760 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X text 283 757 bang when done, f 52;
#X obj 251 657 list trim;
#N canvas 658 23 1390 1006 calculatethreshold 0;
#X floatatom 66 435 5 0 0 0 - - - 0;
#X obj 98 479 s nf1;
#X obj 70 500 value nf1;
#X floatatom 166 381 5 0 0 0 - - - 0;
#X text 104 434 nf1;
#X text 204 380 a1;
#X obj 202 479 s a1;
#X obj 173 500 value a1;
#X floatatom 256 435 5 0 0 0 - - - 0;
#X floatatom 356 381 5 0 0 0 - - - 0;
#X text 295 434 nf2;
#X text 402 380 a2;
#N canvas 0 22 450 278 (subpatch) 0;
#X array help.bufhpss.mode.1 128 float 0;
#X coords 0 60 127 -60 200 140 2 0 0;
#X restore 100 100 graph;
#X obj 496 223 t f f, f 71;
#X obj 496 285 moses;
#X obj 528 254 r nf1;
#X obj 897 325 moses;
#X obj 929 297 r nf2;
#X obj 496 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 496 509 value a1;
#X obj 929 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 928 509 value a2;
#X obj 391 479 s a2;
#X obj 363 500 value a2;
#X obj 266 500 value nf2;
#X obj 294 479 s nf2;
#X floatatom 621 509 5 0 0 0 - - - 0;
#X obj 621 460 expr a1+(($f1-nf1)*((a2-a1)/(nf2-nf1)));
#X floatatom 106 277 5 0 20000 1 - - - 12;
#X floatatom 146 277 5 -50 50 1 - - - 12;
#X floatatom 216 277 5 0 20000 1 - - - 12;
#X floatatom 256 277 5 -50 50 1 - - - 12;
#X obj -37 131 loadbang;
#X msg -37 182 112.47;
#X msg 19 182 3556.56;
#X obj -14 360 s redraw;
#X text 214 243 highershelf;
#X text 254 261 dB;
#X text 214 261 Hz;
#X text 144 261 dB;
#X text 104 261 Hz;
#X text 102 243 lower shelf;
#X floatatom 168 680 6 0 0 0 - - - 0;
#X floatatom 286 680 6 0 0 0 - - - 0;
#X floatatom 227 680 6 0 0 0 - - - 0;
#X floatatom 345 680 6 0 0 0 - - - 0;
#X text 171 663 Hz;
#X text 289 664 Hz;
#X text 230 662 dB;
#X text 348 663 dB;
#N canvas 780 23 1268 771 makelist 0;
#X obj 403 333 t b f;
#X obj 318 333 t b f;
#X obj 489 333 t b f;
#X obj 265 456 list prepend harmthresh;
#X obj 265 381 pack f 0 f 0, f 37;
#X obj 264 67 inlet;
#X obj 318 67 inlet;
#X obj 403 67 inlet;
#X obj 489 67 inlet;
#X obj 265 505 outlet;
#X obj 122 170 inlet;
#X obj 122 200 t b f;
#X obj 569 290 sel 0 1;
#X msg 569 378 symbol harmthresh;
#X msg 592 356 symbol percthresh;
#X obj 403 190 expr $f1/($f2/2), f 25;
#X obj 264 163 expr $f1/($f2/2), f 25;
#X obj 573 132 samplerate~;
#X obj 573 100 loadbang;
#X connect 0 0 4 0;
#X connect 0 1 4 2;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 2 0 4 0;
#X connect 2 1 4 3;
#X connect 3 0 9 0;
#X connect 4 0 3 0;
#X connect 5 0 16 0;
#X connect 6 0 1 0;
#X connect 7 0 15 0;
#X connect 8 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 4 0;
#X connect 11 1 12 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 3 1;
#X connect 14 0 3 1;
#X connect 15 0 0 0;
#X connect 16 0 4 0;
#X connect 17 0 15 1;
#X connect 17 0 16 1;
#X connect 18 0 17 0;
#X restore 110 714 pd makelist;
#X f 34;
#X obj 111 677 vradio 15 1 0 2 empty empty empty 0 -8 0 10 #fcfcfc
#000000 #000000 0;
#X text 34 689 percthresh;
#X text 34 677 harmthresh;
#N canvas 126 -975 297 579 count128 0;
#X obj 85 256 until;
#X obj 85 339 f;
#X obj 134 276 + 1;
#X obj 85 220 t f f;
#X floatatom 85 193 5 0 0 0 - - - 0;
#X floatatom 85 398 5 0 0 0 - - - 0;
#X obj 85 86 r redraw;
#X obj 85 437 outlet;
#X msg 85 154 128;
#X obj 134 301 mod 128;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 9 0;
#X connect 3 0 0 0;
#X connect 3 1 9 1;
#X connect 4 0 3 0;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 8 0 4 0;
#X connect 9 0 1 1;
#X restore 496 194 pd count128;
#X floatatom 564 285 5 0 0 0 - - - 0;
#X floatatom 522 543 5 0 0 0 - - - 0;
#X floatatom 940 537 5 0 0 0 - - - 0;
#X floatatom 959 328 5 0 0 0 - - - 0;
#X obj 66 381 ftom;
#X obj 256 381 ftom;
#X obj 110 752 outlet;
#X obj 496 575 tabwrite help.bufhpss.mode.1, f 71;
#X msg -4 44 \; help.bufhpss.mode.1 edit 0;
#X obj 305 312 t b f;
#X obj 218 314 t b f;
#X obj 151 311 t b f;
#X obj 95 311 t b f;
#X connect 0 0 2 0;
#X connect 0 0 1 0;
#X connect 3 0 7 0;
#X connect 3 0 6 0;
#X connect 8 0 24 0;
#X connect 8 0 25 0;
#X connect 9 0 23 0;
#X connect 9 0 22 0;
#X connect 13 0 14 0;
#X connect 13 1 62 1;
#X connect 14 0 18 0;
#X connect 14 1 16 0;
#X connect 15 0 14 1;
#X connect 15 0 55 0;
#X connect 16 0 27 0;
#X connect 16 1 20 0;
#X connect 17 0 16 1;
#X connect 17 0 58 0;
#X connect 18 0 19 0;
#X connect 19 0 56 0;
#X connect 19 0 62 0;
#X connect 20 0 21 0;
#X connect 21 0 57 0;
#X connect 21 0 62 0;
#X connect 26 0 62 0;
#X connect 27 0 26 0;
#X connect 28 0 67 0;
#X connect 29 0 66 0;
#X connect 30 0 65 0;
#X connect 31 0 64 0;
#X connect 32 0 33 0;
#X connect 32 0 34 0;
#X connect 32 0 63 0;
#X connect 33 0 28 0;
#X connect 34 0 30 0;
#X connect 42 0 50 1;
#X connect 43 0 50 3;
#X connect 44 0 50 2;
#X connect 45 0 50 4;
#X connect 50 0 61 0;
#X connect 51 0 50 0;
#X connect 54 0 13 0;
#X connect 59 0 0 0;
#X connect 60 0 8 0;
#X connect 64 0 35 0;
#X connect 64 1 9 0;
#X connect 64 1 45 0;
#X connect 65 0 35 0;
#X connect 65 1 60 0;
#X connect 65 1 43 0;
#X connect 66 0 35 0;
#X connect 66 1 3 0;
#X connect 66 1 44 0;
#X connect 67 0 35 0;
#X connect 67 1 59 0;
#X connect 67 1 42 0;
#X coords 0 -1 1 1 200 200 2 100 100;
#X restore 251 275 pd calculatethreshold;
#X listbox 269 490 45 0 0 0 - - - 0;
#X obj 491 447 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X text 463 446 <-- 2) change the frequency threshold, f 20;
#X floatatom 366 600 6 0 0 0 - - - 0;
#X floatatom 485 600 6 0 0 0 - - - 0;
#X floatatom 425 600 6 0 0 0 - - - 0;
#X floatatom 545 600 6 0 0 0 - - - 0;
#X text 363 584 Hz;
#X text 482 585 Hz;
#X text 422 583 dB;
#X text 542 584 dB;
#X listbox 376 646 41 0 0 0 - - - 0;
#N canvas 780 23 1268 771 makelist 0;
#X obj 403 333 t b f;
#X obj 318 333 t b f;
#X obj 489 333 t b f;
#X obj 265 456 list prepend harmthresh;
#X obj 265 381 pack f 0 f 0, f 37;
#X obj 264 67 inlet;
#X obj 318 67 inlet;
#X obj 403 67 inlet;
#X obj 489 67 inlet;
#X obj 265 505 outlet;
#X obj 403 190 expr $f1/($f2/2), f 25;
#X obj 264 163 expr $f1/($f2/2), f 25;
#X obj 550 130 samplerate~;
#X obj 549 95 loadbang;
#X connect 0 0 4 0;
#X connect 0 1 4 2;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 2 0 4 0;
#X connect 2 1 4 3;
#X connect 3 0 9 0;
#X connect 4 0 3 0;
#X connect 5 0 11 0;
#X connect 6 0 1 0;
#X connect 7 0 10 0;
#X connect 8 0 2 0;
#X connect 10 0 0 0;
#X connect 11 0 4 0;
#X connect 12 0 11 1;
#X connect 12 0 10 1;
#X connect 13 0 12 0;
#X restore 366 622 pd makelist;
#X f 26;
#X text 280 599 harmthresh;
#X text 263 543 harmthresh is two frequency-amplitude pairs. frequency
is normalised (0-1) \, amp in dB;
#X connect 7 0 5 0;
#X connect 12 0 14 0;
#X connect 14 0 16 0;
#X connect 14 1 16 1;
#X connect 19 0 22 0;
#X connect 22 0 23 0;
#X connect 25 0 22 0;
#X connect 26 0 27 0;
#X connect 26 0 25 0;
#X connect 30 0 39 0;
#X connect 31 0 39 2;
#X connect 32 0 39 1;
#X connect 33 0 39 3;
#X connect 39 0 38 0;
#X connect 39 0 25 0;
#X restore 456 641 pd mode_1;
#N canvas 589 124 700 943 mode_2 0;
#X obj 17 13 cnv 15 660 42 empty empty fluid.bufhpss 1 22 0 36 #4ba3fb
#ffffff 0;
#X text 17 69 use mode 1 for more extreme separation;
#X text 17 99 In mode 0 \, fluid.hpss~ uses a soft-masking approach
that produces smooth results at the cost of how separated they are.
, f 94;
#X text 17 139 In modes 1 and 2 \, a binary mask is used instead \,
where a component is designated as being harmonic or percussive if
the respective median filter output exceeds some threshold. This yields
greater separation \, but can have more audible artefacts., f 94;
#X text 17 199 fluid.hpss~ lets you adjust this threshold with respect
to frequency \, to enable fine-tuning. In mode 1 \, just use the harmthresh
attribute \, which will internally make a complementary threshold for
the percussive part – guaranteeing that the two components still
sum to the source., f 94;
#N canvas 1010 -979 567 271 loadsrc 0;
#X obj 16 83 soundfiler;
#X obj 16 19 inlet;
#X msg 16 41 read -resize \$1 help.hpss.src.3-0 help.hpss.src.3-1;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X restore 18 348 pd loadsrc;
#X obj 18 281 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X obj 18 300 fluid.demoaudiofiles;
#X text 19 281 1) select a source;
#X obj 513 432 bng 15 250 50 0 empty empty empty 17 7 0 10 #c6ffc7
#000000 #000000;
#X obj 532 431 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#N canvas 893 -1080 1866 1052 playresults 0;
#X obj -189 171 inlet;
#X obj -189 505 *~;
#X obj -51 505 *~;
#X obj 87 505 *~;
#X obj -189 532 +~, f 20;
#X obj -189 596 +~, f 40;
#X obj -189 620 outlet~;
#X obj 104 123 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 104 140 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 104 106 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X text 119 102 source;
#X text 99 69 select components:, f 20;
#X obj 312 36 loadbang;
#X msg 312 61 1;
#X obj 360 505 *~;
#X obj 499 505 *~;
#X obj 638 505 *~;
#X obj 360 532 +~, f 20;
#X obj 360 596 +~, f 40;
#X obj 360 620 outlet~;
#X text 119 120 harmonic;
#X text 121 138 percussive;
#X text 121 155 residual;
#X obj -189 205 t b b b b b b b b, f 138;
#X obj 226 505 *~;
#X obj 104 158 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 775 505 *~;
#X obj 223 380 tabplay~ help.hpss.residual.3-0;
#X obj 774 374 tabplay~ help.hpss.residual.3-1;
#X obj 638 334 tabplay~ help.hpss.percussive.3-1;
#X obj 499 284 tabplay~ help.hpss.harmonic.3-1;
#X obj 361 240 tabplay~ help.hpss.src.3-1;
#X obj 87 340 tabplay~ help.hpss.percussive.3-0;
#X obj -51 281 tabplay~ help.hpss.harmonic.3-0;
#X obj -189 241 tabplay~ help.hpss.src.3-0;
#X obj 87 532 +~, f 20;
#X obj 638 532 +~, f 20;
#X connect 0 0 23 0;
#X connect 1 0 4 0;
#X connect 2 0 4 1;
#X connect 3 0 35 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 2 1;
#X connect 7 0 15 1;
#X connect 8 0 3 1;
#X connect 8 0 16 1;
#X connect 9 0 1 1;
#X connect 9 0 14 1;
#X connect 12 0 13 0;
#X connect 13 0 9 0;
#X connect 14 0 17 0;
#X connect 15 0 17 1;
#X connect 16 0 36 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 23 0 34 0;
#X connect 23 1 33 0;
#X connect 23 2 32 0;
#X connect 23 3 27 0;
#X connect 23 4 31 0;
#X connect 23 5 30 0;
#X connect 23 6 29 0;
#X connect 23 7 28 0;
#X connect 24 0 35 1;
#X connect 25 0 26 1;
#X connect 25 0 24 1;
#X connect 26 0 36 1;
#X connect 27 0 24 0;
#X connect 28 0 26 0;
#X connect 29 0 16 0;
#X connect 30 0 15 0;
#X connect 31 0 14 0;
#X connect 32 0 3 0;
#X connect 33 0 2 0;
#X connect 34 0 1 0;
#X connect 35 0 5 1;
#X connect 36 0 18 1;
#X coords 0 -1 1 1 96 80 2 100 100;
#X restore 513 477 pd playresults;
#X f 15;
#X obj 584 577 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X obj 513 573 fluid.out~ buftransientshelp;
#X text 533 431 5) audition results;
#X text 585 575 4) audio on;
#X obj 68 715 bng 15 250 50 0 empty empty empty 17 7 0 10 #c6ffc7 #000000
#000000;
#X obj 87 714 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X obj 22 816 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X text 39 813 bang when done;
#X obj 22 879 clone 2 fluid.multiarray help.hpss.src.3;
#X obj 22 902 clone 2 fluid.multiarray help.hpss.harmonic.3;
#X obj 345 902 clone 2 fluid.multiarray help.hpss.residual.3;
#X obj 345 880 clone 2 fluid.multiarray help.hpss.percussive.3;
#X obj 22 764 fluid.bufhpss -maskingmode 2 -source help.hpss.src.3
-harmonic help.hpss.harmonic.3 -percussive help.hpss.percussive.3 -residual
help.hpss.residual.3;
#X text 88 714 3) decompose, f 13;
#X text 322 690 harmthresh and percthresh are two frequency-amplitude
pairs. frequency is normalised (0-1) \, amp in dB, f 29;
#N canvas 845 23 1203 930 calculatethreshold 0;
#X floatatom 66 435 5 0 0 0 - - - 0;
#X floatatom 166 381 5 0 0 0 - - - 0;
#X text 104 434 nf1;
#X text 204 380 a1;
#X floatatom 256 435 5 0 0 0 - - - 0;
#X floatatom 356 381 5 0 0 0 - - - 0;
#X text 295 434 nf2;
#X text 402 380 a2;
#N canvas 0 22 450 278 (subpatch) 0;
#X array help.bufhpss.mode.2.a 128 float 0;
#X coords 0 60 127 -60 200 140 2 0 0;
#X restore 100 100 graph;
#X obj 496 223 t f f, f 71;
#X obj 496 285 moses;
#X obj 897 325 moses;
#X obj 496 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 929 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X floatatom 621 509 5 0 0 0 - - - 0;
#X floatatom 106 277 5 0 20000 1 - - - 12;
#X floatatom 146 277 5 -50 50 1 - - - 12;
#X floatatom 216 277 5 0 20000 1 - - - 12;
#X floatatom 256 277 5 -50 50 1 - - - 12;
#X obj -37 131 loadbang;
#X msg -37 182 112.47;
#X msg 19 182 3556.56;
#X text 214 243 highershelf;
#X text 254 261 dB;
#X text 214 261 Hz;
#X text 144 261 dB;
#X text 104 261 Hz;
#X text 102 243 lower shelf;
#X obj 98 479 s nf01;
#X obj 70 500 value nf01;
#X obj 173 500 value a01;
#X obj 202 479 s a01;
#X obj 294 479 s nf02;
#X obj 266 500 value nf02;
#X obj 363 500 value a02;
#X obj 391 479 s a02;
#X obj 496 509 value a01;
#X obj 928 509 value a02;
#X obj 621 460 expr a01+(($f1-nf01)*((a02-a01)/(nf02-nf01)));
#X obj 929 297 r nf02;
#X obj 528 254 r nf01;
#X obj -37 370 s redraw2;
#X msg 494 98 \; help.hpss.mode.2.a const;
#N canvas 126 -975 297 579 count128 0;
#X obj 85 256 until;
#X obj 85 339 f;
#X obj 134 276 + 1;
#X obj 85 220 t f f;
#X floatatom 85 193 5 0 0 0 - - - 0;
#X floatatom 85 398 5 0 0 0 - - - 0;
#X obj 85 437 outlet;
#X obj 85 86 r redraw2;
#X obj 134 301 mod 128;
#X msg 85 154 128;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 8 0;
#X connect 3 0 0 0;
#X connect 3 1 8 1;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 7 0 9 0;
#X connect 8 0 1 1;
#X connect 9 0 4 0;
#X restore 496 194 pd count128;
#X obj 66 381 ftom;
#X obj 256 381 ftom;
#X floatatom 168 680 6 0 0 0 - - - 0;
#X floatatom 286 680 6 0 0 0 - - - 0;
#X floatatom 227 680 6 0 0 0 - - - 0;
#X floatatom 345 680 6 0 0 0 - - - 0;
#X text 171 663 Hz;
#X text 289 664 Hz;
#X text 230 662 dB;
#X text 348 663 dB;
#N canvas 780 23 1268 771 makelist 0;
#X obj 403 333 t b f;
#X obj 318 333 t b f;
#X obj 489 333 t b f;
#X obj 265 456 list prepend harmthresh;
#X obj 265 381 pack f 0 f 0, f 37;
#X obj 264 67 inlet;
#X obj 318 67 inlet;
#X obj 403 67 inlet;
#X obj 489 67 inlet;
#X obj 265 505 outlet;
#X obj 122 170 inlet;
#X obj 122 200 t b f;
#X obj 569 290 sel 0 1;
#X msg 569 378 symbol harmthresh;
#X msg 592 356 symbol percthresh;
#X obj 403 190 expr $f1/($f2/2), f 25;
#X obj 264 163 expr $f1/($f2/2), f 25;
#X obj 585 106 samplerate~;
#X obj 587 62 loadbang;
#X connect 0 0 4 0;
#X connect 0 1 4 2;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 2 0 4 0;
#X connect 2 1 4 3;
#X connect 3 0 9 0;
#X connect 4 0 3 0;
#X connect 5 0 16 0;
#X connect 6 0 1 0;
#X connect 7 0 15 0;
#X connect 8 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 4 0;
#X connect 11 1 12 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 3 1;
#X connect 14 0 3 1;
#X connect 15 0 0 0;
#X connect 16 0 4 0;
#X connect 17 0 15 1;
#X connect 17 0 16 1;
#X connect 18 0 17 0;
#X restore 110 714 pd makelist;
#X f 34;
#X obj 111 677 vradio 15 1 0 2 empty empty empty 0 -8 0 10 #fcfcfc
#000000 #000000 0;
#X text 34 689 percthresh;
#X text 34 677 harmthresh;
#X obj 110 789 outlet;
#X obj 496 575 tabwrite help.bufhpss.mode.2.a, f 71;
#X obj 49 617 loadbang;
#X msg 49 641 0;
#X msg -5 29 \; help.bufhpss.mode.2.a edit 0;
#X obj 270 314 t b f;
#X obj 220 315 t b f;
#X obj 155 313 t b f;
#X obj 94 309 t b f;
#X connect 0 0 28 0;
#X connect 0 0 29 0;
#X connect 1 0 30 0;
#X connect 1 0 31 0;
#X connect 4 0 32 0;
#X connect 4 0 33 0;
#X connect 5 0 34 0;
#X connect 5 0 35 0;
#X connect 9 0 10 0;
#X connect 9 1 59 1;
#X connect 10 0 12 0;
#X connect 10 1 11 0;
#X connect 11 0 38 0;
#X connect 11 1 13 0;
#X connect 12 0 36 0;
#X connect 13 0 37 0;
#X connect 14 0 59 0;
#X connect 15 0 66 0;
#X connect 16 0 65 0;
#X connect 17 0 64 0;
#X connect 18 0 63 0;
#X connect 19 0 20 0;
#X connect 19 0 21 0;
#X connect 19 0 62 0;
#X connect 20 0 15 0;
#X connect 21 0 17 0;
#X connect 36 0 59 0;
#X connect 37 0 59 0;
#X connect 38 0 14 0;
#X connect 39 0 11 1;
#X connect 40 0 10 1;
#X connect 43 0 9 0;
#X connect 44 0 0 0;
#X connect 45 0 4 0;
#X connect 46 0 54 1;
#X connect 47 0 54 3;
#X connect 48 0 54 2;
#X connect 49 0 54 4;
#X connect 54 0 58 0;
#X connect 55 0 54 0;
#X connect 60 0 61 0;
#X connect 61 0 55 0;
#X connect 63 0 41 0;
#X connect 63 1 5 0;
#X connect 63 1 49 0;
#X connect 64 0 41 0;
#X connect 64 1 45 0;
#X connect 64 1 47 0;
#X connect 65 0 41 0;
#X connect 65 1 1 0;
#X connect 65 1 48 0;
#X connect 66 0 41 0;
#X connect 66 1 44 0;
#X connect 66 1 46 0;
#X coords 0 -1 1 1 200 200 2 100 100;
#X restore 21 432 pd calculatethreshold;
#N canvas 931 23 1117 788 calculatethreshold 0;
#X floatatom 66 435 5 0 0 0 - - - 0;
#X floatatom 166 381 5 0 0 0 - - - 0;
#X text 104 434 nf1;
#X text 204 380 a1;
#X floatatom 256 435 5 0 0 0 - - - 0;
#X floatatom 356 381 5 0 0 0 - - - 0;
#X text 295 434 nf2;
#X text 402 380 a2;
#N canvas 0 22 450 278 (subpatch) 0;
#X array help.bufhpss.mode.2.b 128 float 0;
#X coords 0 60 127 -60 200 140 2 0 0;
#X restore 100 100 graph;
#X obj 496 223 t f f, f 71;
#X obj 496 285 moses;
#X obj 897 325 moses;
#X obj 496 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 929 484 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X floatatom 581 509 5 0 0 0 - - - 0;
#X floatatom 106 277 5 0 20000 1 - - - 12;
#X floatatom 146 277 5 -50 50 1 - - - 12;
#X floatatom 216 277 5 0 20000 1 - - - 12;
#X floatatom 256 277 5 -50 50 1 - - - 12;
#X obj -37 131 loadbang;
#X msg -37 182 112.47;
#X msg 19 182 3556.56;
#X text 214 243 highershelf;
#X text 254 261 dB;
#X text 214 261 Hz;
#X text 144 261 dB;
#X text 104 261 Hz;
#X text 102 243 lower shelf;
#X msg 494 98 \; help.hpss.mode.2.b const;
#X obj 98 479 s nf001;
#X obj 70 500 value nf001;
#X obj 173 500 value a001;
#X obj 202 479 s a001;
#X obj 294 479 s nf002;
#X obj 266 500 value nf002;
#X obj 363 500 value a002;
#X obj 391 479 s a002;
#X obj 528 254 r nf001;
#X obj 929 297 r nf002;
#X obj 496 509 value a001;
#X obj 928 509 value a002;
#X obj -30 360 s redraw3;
#X obj 581 460 expr a001+(($f1-nf001)*((a002-a001)/(nf002-nf001)))
;
#N canvas 126 -975 297 579 count128 0;
#X obj 85 256 until;
#X obj 85 339 f;
#X obj 134 276 + 1;
#X obj 85 220 t f f;
#X floatatom 85 193 5 0 0 0 - - - 0;
#X floatatom 85 398 5 0 0 0 - - - 0;
#X obj 85 437 outlet;
#X obj 85 86 r redraw3;
#X msg 85 154 128;
#X obj 134 301 mod 128;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 5 0;
#X connect 2 0 9 0;
#X connect 3 0 0 0;
#X connect 3 1 9 1;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 7 0 8 0;
#X connect 8 0 4 0;
#X connect 9 0 1 1;
#X restore 496 194 pd count128;
#X obj 66 381 ftom;
#X obj 256 381 ftom;
#X floatatom 168 680 6 0 0 0 - - - 0;
#X floatatom 286 680 6 0 0 0 - - - 0;
#X floatatom 227 680 6 0 0 0 - - - 0;
#X floatatom 345 680 6 0 0 0 - - - 0;
#X text 171 663 Hz;
#X text 289 664 Hz;
#X text 230 662 dB;
#X text 348 663 dB;
#N canvas 780 23 1268 771 makelist 0;
#X obj 403 333 t b f;
#X obj 318 333 t b f;
#X obj 489 333 t b f;
#X obj 265 456 list prepend harmthresh;
#X obj 265 381 pack f 0 f 0, f 37;
#X obj 264 67 inlet;
#X obj 318 67 inlet;
#X obj 403 67 inlet;
#X obj 489 67 inlet;
#X obj 265 505 outlet;
#X obj 122 170 inlet;
#X obj 122 200 t b f;
#X obj 569 290 sel 0 1;
#X msg 569 378 symbol harmthresh;
#X msg 592 356 symbol percthresh;
#X obj 403 190 expr $f1/($f2/2), f 25;
#X obj 264 163 expr $f1/($f2/2), f 25;
#X obj 599 98 samplerate~;
#X obj 605 66 loadbang;
#X connect 0 0 4 0;
#X connect 0 1 4 2;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 2 0 4 0;
#X connect 2 1 4 3;
#X connect 3 0 9 0;
#X connect 4 0 3 0;
#X connect 5 0 16 0;
#X connect 6 0 1 0;
#X connect 7 0 15 0;
#X connect 8 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 4 0;
#X connect 11 1 12 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 3 1;
#X connect 14 0 3 1;
#X connect 15 0 0 0;
#X connect 16 0 4 0;
#X connect 17 0 15 1;
#X connect 17 0 16 1;
#X connect 18 0 17 0;
#X restore 110 714 pd makelist;
#X f 34;
#X obj 111 677 vradio 15 1 0 2 empty empty empty 0 -8 0 10 #fcfcfc
#000000 #000000 0;
#X text 34 689 percthresh;
#X text 34 677 harmthresh;
#X obj 110 752 outlet;
#X obj 496 575 tabwrite help.bufhpss.mode.2.b, f 71;
#X obj 49 617 loadbang;
#X msg 49 641 1;
#X msg -16 40 \; help.bufhpss.mode.2.b edit 0;
#X obj 287 321 t b f;
#X obj 219 317 t b f;
#X obj 144 313 t b f;
#X obj 74 317 t b f;
#X connect 0 0 29 0;
#X connect 0 0 30 0;
#X connect 1 0 31 0;
#X connect 1 0 32 0;
#X connect 4 0 33 0;
#X connect 4 0 34 0;
#X connect 5 0 35 0;
#X connect 5 0 36 0;
#X connect 9 0 10 0;
#X connect 9 1 59 1;
#X connect 10 0 12 0;
#X connect 10 1 11 0;
#X connect 11 0 42 0;
#X connect 11 1 13 0;
#X connect 12 0 39 0;
#X connect 13 0 40 0;
#X connect 14 0 59 0;
#X connect 15 0 66 0;
#X connect 16 0 65 0;
#X connect 17 0 64 0;
#X connect 18 0 63 0;
#X connect 19 0 20 0;
#X connect 19 0 21 0;
#X connect 19 0 62 0;
#X connect 20 0 15 0;
#X connect 21 0 17 0;
#X connect 37 0 10 1;
#X connect 38 0 11 1;
#X connect 39 0 59 0;
#X connect 40 0 59 0;
#X connect 42 0 14 0;
#X connect 43 0 9 0;
#X connect 44 0 0 0;
#X connect 45 0 4 0;
#X connect 46 0 54 1;
#X connect 47 0 54 3;
#X connect 48 0 54 2;
#X connect 49 0 54 4;
#X connect 54 0 58 0;
#X connect 55 0 54 0;
#X connect 60 0 61 0;
#X connect 61 0 55 0;
#X connect 63 0 41 0;
#X connect 63 1 5 0;
#X connect 63 1 49 0;
#X connect 64 0 41 0;
#X connect 64 1 45 0;
#X connect 64 1 47 0;
#X connect 65 0 41 0;
#X connect 65 1 1 0;
#X connect 65 1 48 0;
#X connect 66 0 41 0;
#X connect 66 1 44 0;
#X connect 66 1 46 0;
#X coords 0 -1 1 1 200 200 2 100 100;
#X restore 267 433 pd calculatethreshold;
#X obj 22 637 list trim;
#X listbox 34 665 38 0 0 0 - - - 0;
#X listbox 325 663 38 0 0 0 - - - 0;
#X obj 21 390 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X text 22 390 2) change the threshold according to the frequency;
#X connect 7 0 5 0;
#X connect 9 0 11 0;
#X connect 11 0 13 0;
#X connect 11 1 13 1;
#X connect 16 0 24 0;
#X connect 24 0 18 0;
#X connect 27 0 30 0;
#X connect 27 0 29 0;
#X connect 28 0 31 0;
#X connect 28 0 29 0;
#X connect 29 0 24 0;
#X restore 456 664 pd mode_2;
#N canvas 1955 -858 567 271 loadsrc 0;
#X obj 16 83 soundfiler;
#X obj 16 115 outlet;
#X obj 16 19 inlet;
#X msg 16 41 read -resize \$1 help.hpss.src.1-0 help.hpss.src.1-1;
#X connect 0 0 1 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X restore 18 228 pd loadsrc;
#X obj 18 161 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X obj 18 180 fluid.demoaudiofiles;
#N canvas 987 23 1061 831 parameters 0;
#X obj 186 548 outlet;
#X obj 34 -62 loadbang;
#X floatatom 213 105 8 0 0 0 - - - 0;
#X floatatom 213 126 8 0 0 0 - - - 0;
#X obj 186 4 r help.bufhpss.presets;
#X floatatom 273 147 8 0 0 0 - - - 0;
#X floatatom 213 147 8 0 0 0 - - - 0;
#X floatatom 333 147 8 0 0 0 - - - 0;
#X text 132 146 fftsettings;
#X obj 373 277 pack 0 0 0;
#X msg 373 301 fftsettings \$1 \$2 \$3;
#X text 111 105 harmfiltersize;
#X text 111 125 percfiltersize;
#X msg 34 -37 \; help.bufhpss.presets 17 31 1024 -1 -1;
#X obj 186 27 unpack 0 0 0 0 0;
#X msg 82 259 harmfiltersize \$1;
#X msg 211 303 percfiltersize \$1;
#X connect 1 0 13 0;
#X connect 2 0 15 0;
#X connect 3 0 16 0;
#X connect 4 0 14 0;
#X connect 5 0 9 1;
#X connect 6 0 9 0;
#X connect 7 0 9 2;
#X connect 9 0 10 0;
#X connect 10 0 0 0;
#X connect 14 0 2 0;
#X connect 14 1 3 0;
#X connect 14 2 6 0;
#X connect 14 3 5 0;
#X connect 14 4 7 0;
#X connect 15 0 0 0;
#X connect 16 0 0 0;
#X coords 0 -1 1 1 300 70 2 100 100;
#X restore 377 318 pd parameters;
#N canvas 921 -1080 1263 977 parameters 0;
#X obj 39 897 r \$0-params;
#X obj 39 920 outlet;
#X obj 419 125 s \$0-params;
#X obj 419 195 s \$0-params;
#X obj 419 295 s \$0-params;
#X obj 419 446 s \$0-params;
#X obj 419 515 s \$0-params;
#X obj 419 585 s \$0-params;
#X obj 419 655 s \$0-params;
#X text 28 6 Optional parameters;
#X obj 29 125 s \$0-params;
#X text 192 158 for hopsize \, -1 = windowsize/2, f 25;
#X text 193 100 window size (1024) \, hop size (-1) \, fft size (-1)
, f 25;
#X text 192 199 for fftsize \, -1 = windowsize snapped to nearest power
of 2, f 25;
#X obj 43 552 s \$0-params;
#X obj 39 435 cnv 10 233 2 empty empty empty 20 12 0 14 #bbbbbb #404040
0;
#X obj 29 74 cnv 10 340 2 empty empty empty 20 12 0 14 #bbbbbb #404040
0;
#X text 27 54 FFT settings;
#X msg 29 102 fftsettings 1024 -1 1;
#X obj 43 470 vradio 12 1 0 3 empty empty empty 0 -8 0 10 #fcfcfc #000000
#000000 0;
#X obj 29 283 s \$0-params;
#X msg 29 260 maxfftsize -1;
#X text 193 255 Set an explicit upper bound on the FFT size at object
instantiation. The default of -1 sets this to whatever the initial
FFT size is, f 25;
#X text 37 415 Masking mode;
#X msg 43 530 maskingmode \$1;
#X text 58 466 0: soft masks, f 15;
#X text 58 478 1: binary masks;
#X text 58 490 2: soft masks + residual;
#X msg 419 102 harmfiltersize 17;
#X text 573 100 size \, in spectral frames \, of the median filter
for the harmonic component, f 32;
#X msg 419 172 harmthresh 0 1 1 1;
#X text 573 170 when maskingmode is 1 or 2 \, set the threshold curve
for classifying an FFT bin as harmonic. Takes a list of two frequency-amplitude
pairs as coordinates, f 32;
#X msg 419 272 harmonic symbol;
#X text 573 270 name of the array where the extracted harmonic component
will be reconstructed., f 32;
#X msg 419 422 maxharmfiltersize -1;
#X msg 419 492 maxpercfiltersize -1;
#X msg 419 562 numchans -1;
#X msg 419 632 numframes -1;
#X obj 419 725 s \$0-params;
#X obj 419 795 s \$0-params;
#X obj 839 125 s \$0-params;
#X obj 839 195 s \$0-params;
#X msg 419 702 percfiltersize 31;
#X msg 419 772 percthresh 0 1 1 1;
#X msg 839 102 percussive symbol;
#X msg 839 172 residual symbol;
#X obj 839 265 s \$0-params;
#X obj 839 335 s \$0-params;
#X msg 839 242 source symbol;
#X msg 839 312 startchan symbol;
#X obj 39 625 cnv 10 233 2 empty empty empty 20 12 0 14 #bbbbbb #404040
0;
#X text 37 605 Warnings;
#X obj 39 685 s \$0-params;
#X msg 39 662 warnings 0;
#X text 173 660 warnings on(1) or off (0), f 27;
#X obj 419 375 s \$0-params;
#X msg 419 352 maxfftsize -1;
#X text 573 351 upper bound on the FFT size, f 32;
#X text 573 421 maximum value for harmfiltersize;
#X text 573 490 maximum value for percfiltersize;
#X text 573 560 for multichannel source \, how many channels should
be processed, f 32;
#X text 573 630 How many frames should be processed., f 32;
#X text 573 700 The size \, in spectral bins \, of the median filter
for the percussive component, f 32;
#X text 573 770 In maskingmode 2 \, an independant pair of frequency-amplitude
pairs defining the threshold for the percussive part, f 32;
#X text 993 101 index of the buffer where the extracted percussive
component will be reconstructed, f 33;
#X text 993 171 index of the buffer where the residual component will
be reconstructed in mode 2, f 33;
#X text 993 241 name of the buffer to use as the source material,
f 33;
#X text 993 311 for multichannel source \, which channel to start processing
at., f 33;
#X obj 419 74 cnv 10 340 2 empty empty empty 20 12 0 14 #bbbbbb #404040
0;
#X obj 839 74 cnv 10 340 2 empty empty empty 20 12 0 14 #bbbbbb #404040
0;
#X connect 0 0 1 0;
#X connect 18 0 10 0;
#X connect 19 0 24 0;
#X connect 21 0 20 0;
#X connect 24 0 14 0;
#X connect 28 0 2 0;
#X connect 30 0 3 0;
#X connect 32 0 4 0;
#X connect 34 0 5 0;
#X connect 35 0 6 0;
#X connect 36 0 7 0;
#X connect 37 0 8 0;
#X connect 42 0 38 0;
#X connect 43 0 39 0;
#X connect 44 0 40 0;
#X connect 45 0 41 0;
#X connect 48 0 46 0;
#X connect 49 0 47 0;
#X connect 53 0 52 0;
#X connect 56 0 55 0;
#X restore 438 421 pd parameters;
#X obj 305 288 bng 15 250 50 0 empty empty empty 17 7 0 10 #c6ffc7
#000000 #000000;
#X text 19 161 1) select a source;
#X obj 325 288 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X text 326 288 2) decompose;
#X obj 304 585 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X text 321 584 bang when done;
#X obj 18 343 fluid.waveform 256 64 0 empty empty 0;
#X obj 18 438 fluid.waveform 256 64 1 empty empty 0;
#X obj 18 533 fluid.waveform 256 64 1 empty empty 0;
#X obj 304 607 s done;
#X obj 343 156 clone 2 fluid.multiarray help.hpss.src.1, f 47;
#X obj 343 205 clone 2 fluid.multiarray help.hpss.percussive.1;
#X obj 343 180 clone 2 fluid.multiarray help.hpss.harmonic.1, f 47
;
#X msg 18 285 waveform help.hpss.src.1;
#X text 430 457 Arguments:, f 26;
#X text 442 470 harmfiltersize (number)(optional);
#X text 442 482 percfiltersize (numner)(optional);
#X obj 17 609 bng 15 250 50 0 empty empty empty 17 7 0 10 #c6ffc7 #000000
#000000;
#X obj 36 608 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X text 37 608 4) audition results, f 23;
#N canvas 1638 -935 1108 745 playresults 0;
#X obj -189 171 inlet;
#X obj -189 505 *~;
#X obj -51 505 *~;
#X obj 87 505 *~;
#X obj -189 532 +~, f 20;
#X obj -189 556 +~, f 40;
#X obj -189 580 outlet~;
#X obj 104 123 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 104 140 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 104 106 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X text 119 102 source;
#X text 99 69 select components:, f 20;
#X obj 312 36 loadbang;
#X msg 312 61 1;
#X obj 224 505 *~;
#X obj 363 505 *~;
#X obj 508 505 *~;
#X obj 224 532 +~, f 20;
#X obj 224 556 +~, f 42;
#X obj 224 580 outlet~;
#X obj -189 205 t b b b b b b, f 99;
#X obj -189 241 tabplay~ help.hpss.src.1-0;
#X obj 225 240 tabplay~ help.hpss.src.1-1;
#X text 119 120 harmonic;
#X text 121 138 percussive;
#X obj 501 334 tabplay~ help.hpss.percussive.1-1;
#X obj 363 284 tabplay~ help.hpss.harmonic.1-1;
#X obj -51 281 tabplay~ help.hpss.harmonic.1-0;
#X obj 87 340 tabplay~ help.hpss.percussive.1-0;
#X connect 0 0 20 0;
#X connect 1 0 4 0;
#X connect 2 0 4 1;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 2 1;
#X connect 7 0 15 1;
#X connect 8 0 3 1;
#X connect 8 0 16 1;
#X connect 9 0 1 1;
#X connect 9 0 14 1;
#X connect 12 0 13 0;
#X connect 13 0 9 0;
#X connect 14 0 17 0;
#X connect 15 0 17 1;
#X connect 16 0 18 1;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 20 0 21 0;
#X connect 20 1 27 0;
#X connect 20 2 28 0;
#X connect 20 3 22 0;
#X connect 20 4 26 0;
#X connect 20 5 25 0;
#X connect 21 0 1 0;
#X connect 22 0 14 0;
#X connect 25 0 16 0;
#X connect 26 0 15 0;
#X connect 27 0 2 0;
#X connect 28 0 3 0;
#X coords 0 -1 1 1 96 60 2 100 100;
#X restore 17 654 pd playresults;
#X f 15;
#X obj 88 734 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040
0;
#X text 89 732 3) audio on, f 16;
#X obj 17 730 fluid.out~ buftransientshelp;
#X text 503 297 experiment with settings;
#N canvas 411 449 450 300 viewharmonic 0;
#X obj 32 22 r done;
#X msg 32 47 waveform help.hpss.harmonic.1;
#X obj 32 75 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 18 413 pd viewharmonic;
#N canvas 411 449 450 300 viewharmonic 0;
#X obj 32 22 r done;
#X obj 32 75 outlet;
#X msg 32 47 waveform help.hpss.percussive.1;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X restore 18 508 pd viewharmonic;
#X text 424 401 more parameters;
#X obj 304 516 fluid.bufhpss -maxharmfiltersize 51 -maxpercfiltersize
51 -source help.hpss.src.1 -harmonic help.hpss.harmonic.1 -percussive
help.hpss.percussive.1, f 45;
#X connect 11 0 29 0;
#X connect 13 0 11 0;
#X connect 14 0 44 0;
#X connect 15 0 44 0;
#X connect 16 0 44 0;
#X connect 20 0 25 0;
#X connect 29 0 22 0;
#X connect 33 0 36 0;
#X connect 36 0 39 0;
#X connect 36 1 39 1;
#X connect 41 0 23 0;
#X connect 42 0 24 0;
#X connect 44 0 20 0;
