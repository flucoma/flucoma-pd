#N canvas 36 157 692 510 12;
#X obj 17 13 cnv 15 660 42 empty empty fluid.sinefeature~ 1 22 0 36 #4ba3fb #ffffff 0;
#X obj 509 60 fluid.referencelauncher fluid.sinefeature~.html reference/sinefeature/;
#X obj 17 60 cnv 15 488 17 empty empty Realtime\ Spectral\ Peak\ Tracking\ as\ Feature 4 8 0 13 #e0e0e0 #404040 0;
#X text 17 89 Calculate the spectral difference feature used by fluid.onsetslice~;
#X obj 20 384 fluid.out~ sinefeaturehelp;
#X text 424 325 <-- more parameters;
#N canvas 566 282 788 725 parameters 0;
#X obj 29 577 r \$0-params;
#X obj 29 600 outlet;
#X text 28 6 Optional parameters to fluid.bufaudiotransport;
#X obj 29 125 s \$0-params;
#X text 192 158 for hopsize \, -1 = windowsize/2;
#X text 193 100 window size (1024) \, hop size (-1) \, fft size (-1), f 24;
#X text 192 199 for fftsize \, -1 = windowsize snapped to nearest power of 2, f 29;
#X obj 29 74 cnv 10 310 2 empty empty empty 20 12 0 14 #bbbbbb #404040 0;
#X text 27 54 FFT settings;
#X msg 29 102 fftsettings 1024 -1 1;
#X obj 27 329 cnv 10 233 2 empty empty empty 20 12 0 14 #bbbbbb #404040 0;
#X text 25 309 Warnings;
#X obj 28 408 s \$0-params;
#X msg 28 351 warnings 1;
#X msg 38 373 warnings 0;
#X obj 315 579 s \$0-params;
#X obj 315 528 s \$0-params;
#X obj 315 473 s \$0-params;
#X obj 315 421 s \$0-params;
#X obj 315 369 s \$0-params;
#X msg 315 345 order 1;
#X msg 315 449 maxnumpeaks 10;
#X msg 315 397 numpeaks 4;
#X text 428 442 destination Manually sets a maximum value for numpeaks. Can only be set at object instantiation., f 38;
#X text 404 503 The units and scale used to report the frequency of the peaks. By default (0) \, it is in Hz (linear) \, and the alternative (1) is in MIDI (logarithmic)., f 51;
#X text 404 553 The units and scale used to report the magnitude of the peaks. By default (0) \, it is in amp (linear) \, and the alternative (1) is in dB (logarithmic)., f 51;
#X text 428 390 The number of peaks to search report back. It is capped at (fftSize / 2) + 1, f 42;
#X text 428 338 How the reported peaks are to be ordered. By default (0) \, it is by frequencies \, and the alternative (1) is by magnitude., f 49;
#X obj 314 329 cnv 10 200 2 empty empty empty 20 12 0 14 #bbbbbb #404040 0;
#X text 313 309 Parameters;
#X msg 315 556 magunit 1;
#X msg 315 505 frequnit 1;
#X connect 0 0 1 0;
#X connect 9 0 3 0;
#X connect 13 0 12 0;
#X connect 14 0 12 0;
#X connect 20 0 19 0;
#X connect 21 0 17 0;
#X connect 22 0 18 0;
#X connect 30 0 15 0;
#X connect 31 0 16 0;
#X restore 321 322 pd parameters;
#X obj 91 389 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X obj 19 160 osc~ 440;
#X obj 19 184 *~ 0.05;
#X obj 20 326 +~;
#X obj 82 160 osc~ 789;
#X obj 82 184 *~ 0.1;
#N canvas 1043 -953 946 750 parameters 0;
#X floatatom 237 146 8 0 0 0 - - - 0;
#X floatatom 237 125 8 0 0 0 - - - 0;
#X floatatom 237 167 8 0 0 0 - - - 0;
#X obj 123 417 outlet;
#X floatatom 237 104 8 0 9 0 - - - 0;
#X obj 98 -120 loadbang;
#X obj 228 -4 r help.bufsinefeature.presets;
#X text 153 104 fftsettings;
#X text 104 125 detectionthreshold;
#X text 174 146 numpeaks;
#X text 174 166 frequnit;
#X text 181 186 magunit;
#X text 195 209 order;
#X obj 228 19 unpack 0 0 0 0 0 0;
#X msg 98 -92 \; help.bufsinefeature.presets 1024 -96 10 0 0 0;
#X msg 41 263 fftsettings \$1 -1 -1;
#X msg 139 287 detectionthreshold \$1;
#X msg 199 262 numpeaks \$1;
#X msg 185 315 frequnit \$1;
#X msg 185 340 magunit \$1;
#X msg 297 263 order \$1;
#X floatatom 237 188 8 0 0 0 - - - 0;
#X floatatom 237 209 8 0 0 0 - - - 0;
#X obj 11 421 outlet;
#X connect 0 0 17 0;
#X connect 1 0 16 0;
#X connect 2 0 18 0;
#X connect 4 0 15 0;
#X connect 5 0 14 0;
#X connect 6 0 13 0;
#X connect 13 0 4 0;
#X connect 13 1 1 0;
#X connect 13 2 0 0;
#X connect 13 3 2 0;
#X connect 13 4 21 0;
#X connect 13 5 22 0;
#X connect 15 0 3 0;
#X connect 15 0 23 0;
#X connect 16 0 3 0;
#X connect 16 0 23 0;
#X connect 17 0 3 0;
#X connect 18 0 3 0;
#X connect 19 0 3 0;
#X connect 20 0 3 0;
#X connect 21 0 19 0;
#X connect 22 0 20 0;
#X coords 0 -1 1 1 200 130 2 100 100;
#X restore 195 159 pd parameters;
#X text 400 169 Same arguments as fluid.bufsines peak detection algorithm, f 19;
#X obj 49 360 fluid.sines~ -maxfftsize 2048;
#X obj 292 359 fluid.sinefeature~ 4 -maxfftsize 2048;
#X text 91 388 1) Audio on.;
#X listbox 292 383 23 0 0 0 - - - 0;
#X listbox 292 408 23 0 0 0 - - - 0;
#X text 458 384 peak frequencies;
#X text 458 408 peak magnitudes;
#X obj 529 443 cnv 15 149 50 empty empty More\ information 4 10 0 13 #e0e0e0 #404040 0;
#N canvas 265 255 691 607 musical_example 0;
#X obj 366 249 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X obj 89 574 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X text 89 573 2) Audio on.;
#X obj 18 570 fluid.out~ sinefeaturehelp;
#X obj 18 122 fluid.demosound~;
#X obj 17 102 cnv 15 15 15 empty empty empty 20 12 0 14 #c6ffc7 #404040 0;
#X text 18 100 1) Select a source.;
#X obj 330 465 list store;
#X obj 408 465 list store;
#N canvas 1043 -953 946 750 parameters 0;
#X floatatom 237 127 8 0 0 0 - - - 0;
#X floatatom 237 106 8 0 0 0 - - - 0;
#X obj 123 417 outlet;
#X text 104 106 detectionthreshold;
#X text 174 127 numpeaks;
#X text 195 147 order;
#X msg 139 287 detectionthreshold \$1;
#X msg 199 262 numpeaks \$1;
#X msg 297 263 order \$1;
#X floatatom 237 147 8 0 0 0 - - - 0;
#X obj 233 21 loadbang;
#X obj 232 67 unpack f f f;
#X msg 233 45 -96 10 1;
#X connect 0 0 7 0;
#X connect 1 0 6 0;
#X connect 6 0 2 0;
#X connect 7 0 2 0;
#X connect 8 0 2 0;
#X connect 9 0 8 0;
#X connect 10 0 12 0;
#X connect 11 0 1 0;
#X connect 11 1 0 0;
#X connect 11 2 9 0;
#X connect 12 0 11 0;
#X coords 0 -1 1 1 200 70 2 100 100;
#X restore 82 240 pd parameters;
#X msg 330 303 10;
#X msg 330 379 get \$1 1;
#X msg 408 379 get \$1 1;
#X obj 330 355 t f f f;
#X obj 78 513 pack f f f;
#N canvas 131 166 281 260 synth 0;
#X obj 37 37 inlet;
#X obj 37 61 route 0 1 2 3 4 5 6 7 8 9;
#N canvas 173 212 450 300 voice 0;
#X obj 37 37 inlet;
#X obj 37 61 unpack f f;
#X obj 37 85 osc~;
#X obj 37 109 *~;
#X obj 37 133 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 37 85 pd voice;
#N canvas 173 212 450 300 voice 0;
#X obj 37 37 inlet;
#X obj 37 61 unpack f f;
#X obj 37 85 osc~;
#X obj 37 109 *~;
#X obj 37 133 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 54 107 pd voice;
#N canvas 173 212 450 300 voice 0;
#X obj 37 37 inlet;
#X obj 37 61 unpack f f;
#X obj 37 85 osc~;
#X obj 37 109 *~;
#X obj 37 133 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 71 129 pd voice;
#N canvas 173 212 450 300 voice 0;
#X obj 37 37 inlet;
#X obj 37 61 unpack f f;
#X obj 37 85 osc~;
#X obj 37 109 *~;
#X obj 37 133 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 88 151 pd voice;
#N canvas 173 212 450 300 voice 0;
#X obj 37 37 inlet;
#X obj 37 61 unpack f f;
#X obj 37 85 osc~;
#X obj 37 109 *~;
#X obj 37 133 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 106 84 pd voice;
#N canvas 173 212 450 300 voice 0;
#X obj 37 37 inlet;
#X obj 37 61 unpack f f;
#X obj 37 85 osc~;
#X obj 37 109 *~;
#X obj 37 133 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 123 106 pd voice;
#N canvas 173 212 450 300 voice 0;
#X obj 37 37 inlet;
#X obj 37 61 unpack f f;
#X obj 37 85 osc~;
#X obj 37 109 *~;
#X obj 37 133 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 140 128 pd voice;
#N canvas 173 212 450 300 voice 0;
#X obj 37 37 inlet;
#X obj 37 61 unpack f f;
#X obj 37 85 osc~;
#X obj 37 109 *~;
#X obj 37 133 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 157 150 pd voice;
#N canvas 173 212 450 300 voice 0;
#X obj 37 37 inlet;
#X obj 37 61 unpack f f;
#X obj 37 85 osc~;
#X obj 37 109 *~;
#X obj 37 133 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 174 84 pd voice;
#N canvas 173 212 450 300 voice 0;
#X obj 37 37 inlet;
#X obj 37 61 unpack f f;
#X obj 37 85 osc~;
#X obj 37 109 *~;
#X obj 37 133 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X restore 191 106 pd voice;
#X obj 35 207 outlet~;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 1 2 4 0;
#X connect 1 3 5 0;
#X connect 1 4 6 0;
#X connect 1 5 7 0;
#X connect 1 6 8 0;
#X connect 1 7 9 0;
#X connect 1 8 10 0;
#X connect 1 9 11 0;
#X connect 2 0 12 0;
#X connect 3 0 12 0;
#X connect 4 0 12 0;
#X connect 5 0 12 0;
#X connect 6 0 12 0;
#X connect 7 0 12 0;
#X connect 8 0 12 0;
#X connect 9 0 12 0;
#X connect 10 0 12 0;
#X connect 11 0 12 0;
#X restore 78 537 pd synth;
#N canvas 194 235 450 300 counter 0;
#X obj 37 37 inlet;
#X obj 36 84 until;
#X obj 36 61 t f b;
#X obj 36 108 f;
#X msg 77 85 0;
#X obj 68 109 + 1;
#X obj 36 132 outlet;
#X connect 0 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 2 1 4 0;
#X connect 3 0 5 0;
#X connect 3 0 6 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X restore 330 327 pd counter;
#X text 365 247 3) every time we press '10' it will sample and resynthesis the 'numpeak' loudest/lowest (depending on 'order') peaks above 'detectionthreshold', f 37;
#X obj 17 13 cnv 15 660 42 empty empty fluid.sinefeature~ 1 22 0 36 #4ba3fb #ffffff 0;
#X obj 17 60 cnv 15 488 17 empty empty Realtime\ Spectral\ Difference\ Feature 4 8 0 13 #e0e0e0 #404040 0;
#X obj 68 326 fluid.sinefeature~ 10 -order 1;
#X connect 4 0 3 0;
#X connect 4 0 3 1;
#X connect 4 0 20 0;
#X connect 7 0 14 1;
#X connect 8 0 14 2;
#X connect 9 0 20 0;
#X connect 10 0 16 0;
#X connect 11 0 7 0;
#X connect 12 0 8 0;
#X connect 13 0 14 0;
#X connect 13 1 11 0;
#X connect 13 2 12 0;
#X connect 14 0 15 0;
#X connect 15 0 3 0;
#X connect 15 0 3 1;
#X connect 16 0 13 0;
#X connect 20 0 7 1;
#X connect 20 1 8 1;
#X restore 531 470 pd musical_example;
#X connect 6 0 16 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 4 0;
#X connect 10 0 15 0;
#X connect 10 0 16 0;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 13 0 15 0;
#X connect 13 1 16 0;
#X connect 15 0 4 1;
#X connect 16 0 18 0;
#X connect 16 1 19 0;
